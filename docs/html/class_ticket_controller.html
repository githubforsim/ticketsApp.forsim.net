<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TicketsApp: Référence de la classe TicketController</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TicketsApp<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Recherche',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Fonctions membres publiques</a> &#124;
<a href="#pro-methods">Fonctions membres protégées</a> &#124;
<a href="#pro-attribs">Attributs protégés</a> &#124;
<a href="#pri-methods">Fonctions membres privées</a> &#124;
<a href="class_ticket_controller-members.html">Liste de tous les membres</a>  </div>
  <div class="headertitle"><div class="title">Référence de la classe TicketController</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Fonctions membres publiques</h2></td></tr>
<tr class="memitem:a97a5c6b1674364369ae3cee939403502" id="r_a97a5c6b1674364369ae3cee939403502"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97a5c6b1674364369ae3cee939403502">__construct</a> ()</td></tr>
<tr class="separator:a97a5c6b1674364369ae3cee939403502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a846aecdf4cf1437ed12d8536a9a167d3" id="r_a846aecdf4cf1437ed12d8536a9a167d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a846aecdf4cf1437ed12d8536a9a167d3">createAttachments</a> ($ticketId, $filesData)</td></tr>
<tr class="separator:a846aecdf4cf1437ed12d8536a9a167d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e223a0c00d9820f510eae48a420fe4" id="r_a07e223a0c00d9820f510eae48a420fe4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07e223a0c00d9820f510eae48a420fe4">createTicket</a> ($postData, $filesData)</td></tr>
<tr class="separator:a07e223a0c00d9820f510eae48a420fe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a824cfb5f960f5a21a6ca4f57e0b28" id="r_ab1a824cfb5f960f5a21a6ca4f57e0b28"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1a824cfb5f960f5a21a6ca4f57e0b28">logEvent</a> ($ticket_id, $username, $statut_evenement_id)</td></tr>
<tr class="separator:ab1a824cfb5f960f5a21a6ca4f57e0b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a388fefc96acb2c45a0b1dd916988f164" id="r_a388fefc96acb2c45a0b1dd916988f164"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a388fefc96acb2c45a0b1dd916988f164">getUserEventHistory</a> ($produit_id)</td></tr>
<tr class="separator:a388fefc96acb2c45a0b1dd916988f164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9489a11ff7403bb1afb1fcc8f63f88ab" id="r_a9489a11ff7403bb1afb1fcc8f63f88ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9489a11ff7403bb1afb1fcc8f63f88ab">getUrgence</a> ()</td></tr>
<tr class="separator:a9489a11ff7403bb1afb1fcc8f63f88ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23323cf0556b491ef18c31e64b90b431" id="r_a23323cf0556b491ef18c31e64b90b431"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23323cf0556b491ef18c31e64b90b431">getProduit</a> ()</td></tr>
<tr class="separator:a23323cf0556b491ef18c31e64b90b431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6648402ddeb3f1f26e1af2a4726f92" id="r_a8a6648402ddeb3f1f26e1af2a4726f92"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a6648402ddeb3f1f26e1af2a4726f92">getType</a> ()</td></tr>
<tr class="separator:a8a6648402ddeb3f1f26e1af2a4726f92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64709ea476021931f9ffb75f2381e1f9" id="r_a64709ea476021931f9ffb75f2381e1f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64709ea476021931f9ffb75f2381e1f9">getOpenTicket</a> ($produit_id)</td></tr>
<tr class="separator:a64709ea476021931f9ffb75f2381e1f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bfa1f2e924650af7260dd3a10a0dd81" id="r_a5bfa1f2e924650af7260dd3a10a0dd81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5bfa1f2e924650af7260dd3a10a0dd81">getSolvedTicket</a> ($selectedProduct)</td></tr>
<tr class="separator:a5bfa1f2e924650af7260dd3a10a0dd81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dbfdb594d3404efd5cebd7dfc59e88f" id="r_a0dbfdb594d3404efd5cebd7dfc59e88f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0dbfdb594d3404efd5cebd7dfc59e88f">getClosedTicket</a> ($produit_id)</td></tr>
<tr class="separator:a0dbfdb594d3404efd5cebd7dfc59e88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235d577313774da3928938bfb8ae957a" id="r_a235d577313774da3928938bfb8ae957a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a235d577313774da3928938bfb8ae957a">getTicketDetailsAndEvents</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a235d577313774da3928938bfb8ae957a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b3cd2c5dcf85a1137a986fe09ec6a5" id="r_a78b3cd2c5dcf85a1137a986fe09ec6a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78b3cd2c5dcf85a1137a986fe09ec6a5">getClosedDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a78b3cd2c5dcf85a1137a986fe09ec6a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f362886cb39b6c982cc3bb1c15ee454" id="r_a9f362886cb39b6c982cc3bb1c15ee454"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f362886cb39b6c982cc3bb1c15ee454">getSolvedDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a9f362886cb39b6c982cc3bb1c15ee454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed8f055d57290527b30f2deba64a69af" id="r_aed8f055d57290527b30f2deba64a69af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed8f055d57290527b30f2deba64a69af">getTicketSaveDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:aed8f055d57290527b30f2deba64a69af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a899f4503616ce09659286c42671450d9" id="r_a899f4503616ce09659286c42671450d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a899f4503616ce09659286c42671450d9">getTicketSolvedSaveDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a899f4503616ce09659286c42671450d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbe155547a07f88a6692ae845a62f771" id="r_afbe155547a07f88a6692ae845a62f771"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afbe155547a07f88a6692ae845a62f771">getTicketClosedSaveDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:afbe155547a07f88a6692ae845a62f771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b14f653b083433497a9a14e4efee1b4" id="r_a4b14f653b083433497a9a14e4efee1b4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b14f653b083433497a9a14e4efee1b4">setOpen</a> ($ticket_id)</td></tr>
<tr class="separator:a4b14f653b083433497a9a14e4efee1b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35bc1ccea9525dd91c438e4d1bf1c6ef" id="r_a35bc1ccea9525dd91c438e4d1bf1c6ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35bc1ccea9525dd91c438e4d1bf1c6ef">setClose</a> ($ticket_id)</td></tr>
<tr class="separator:a35bc1ccea9525dd91c438e4d1bf1c6ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a467232670497f6ccb32e34232678c77a" id="r_a467232670497f6ccb32e34232678c77a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a467232670497f6ccb32e34232678c77a">setSolve</a> ($ticket_id)</td></tr>
<tr class="separator:a467232670497f6ccb32e34232678c77a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2998cabb018a768575c74b253d2ac5ee" id="r_a2998cabb018a768575c74b253d2ac5ee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2998cabb018a768575c74b253d2ac5ee">getTicketMessages</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a2998cabb018a768575c74b253d2ac5ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71eeb3de27180dbc313c0735f58771cf" id="r_a71eeb3de27180dbc313c0735f58771cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a71eeb3de27180dbc313c0735f58771cf">getTicketMessagesSolved</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a71eeb3de27180dbc313c0735f58771cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aee3a7b99cf332d4ac740e028baef55" id="r_a0aee3a7b99cf332d4ac740e028baef55"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0aee3a7b99cf332d4ac740e028baef55">getTicketMessagesClosed</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a0aee3a7b99cf332d4ac740e028baef55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3cc89b2248a3e3b8c3d9e522ceaba5c" id="r_ae3cc89b2248a3e3b8c3d9e522ceaba5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3cc89b2248a3e3b8c3d9e522ceaba5c">sendMessage</a> ($postData, $username)</td></tr>
<tr class="separator:ae3cc89b2248a3e3b8c3d9e522ceaba5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa42e75461a7380b32c461b17020ac2fb" id="r_aa42e75461a7380b32c461b17020ac2fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa42e75461a7380b32c461b17020ac2fb">sendMessageSolved</a> ($postData, $username)</td></tr>
<tr class="separator:aa42e75461a7380b32c461b17020ac2fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd59bcd78822d3237539f23d7b7d49a4" id="r_abd59bcd78822d3237539f23d7b7d49a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd59bcd78822d3237539f23d7b7d49a4">sendMessageClosed</a> ($postData, $username)</td></tr>
<tr class="separator:abd59bcd78822d3237539f23d7b7d49a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac585997b4a6edded075269e6a6608ab3" id="r_ac585997b4a6edded075269e6a6608ab3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac585997b4a6edded075269e6a6608ab3">updateTicketsDetails</a> ($postData)</td></tr>
<tr class="separator:ac585997b4a6edded075269e6a6608ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a419397f13ef2dcbb2db5b5538125a398" id="r_a419397f13ef2dcbb2db5b5538125a398"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a419397f13ef2dcbb2db5b5538125a398">deleteAttachment</a> ($attachmentId)</td></tr>
<tr class="separator:a419397f13ef2dcbb2db5b5538125a398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1659b9e5e7380453dc8961f2c895169" id="r_af1659b9e5e7380453dc8961f2c895169"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af1659b9e5e7380453dc8961f2c895169">ModifAttachment</a> ($ticket_id, $filesData)</td></tr>
<tr class="separator:af1659b9e5e7380453dc8961f2c895169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0012ff465f618f081959d32cb0ebbed" id="r_ad0012ff465f618f081959d32cb0ebbed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad0012ff465f618f081959d32cb0ebbed">getAttachmentsTicket</a> ($ticket_id)</td></tr>
<tr class="separator:ad0012ff465f618f081959d32cb0ebbed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad942815622a28da71ad4de09234e4c3b" id="r_ad942815622a28da71ad4de09234e4c3b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad942815622a28da71ad4de09234e4c3b">displayProducts</a> ()</td></tr>
<tr class="separator:ad942815622a28da71ad4de09234e4c3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Fonctions membres protégées</h2></td></tr>
<tr class="memitem:a4ce83f85f5ae79ef70adbf7b67317eca" id="r_a4ce83f85f5ae79ef70adbf7b67317eca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a> ($view, $data=[])</td></tr>
<tr class="separator:a4ce83f85f5ae79ef70adbf7b67317eca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Attributs protégés</h2></td></tr>
<tr class="memitem:ad838cd754f2ab9173a0f0b8f55c0ae0c" id="r_ad838cd754f2ab9173a0f0b8f55c0ae0c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad838cd754f2ab9173a0f0b8f55c0ae0c">$ticketModel</a></td></tr>
<tr class="separator:ad838cd754f2ab9173a0f0b8f55c0ae0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Fonctions membres privées</h2></td></tr>
<tr class="memitem:a3d1647eef3e6290674d721e2f6c75832" id="r_a3d1647eef3e6290674d721e2f6c75832"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a> ($postData, $field)</td></tr>
<tr class="separator:a3d1647eef3e6290674d721e2f6c75832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7ac4a582270a0f6840984585010f860" id="r_aa7ac4a582270a0f6840984585010f860"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa7ac4a582270a0f6840984585010f860">processAttachment</a> ($attachment)</td></tr>
<tr class="separator:aa7ac4a582270a0f6840984585010f860"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description détaillée</h2>
<div class="textblock">
<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00031">31</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
</div><h2 class="groupheader">Documentation des constructeurs et destructeur</h2>
<a id="a97a5c6b1674364369ae3cee939403502" name="a97a5c6b1674364369ae3cee939403502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97a5c6b1674364369ae3cee939403502">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::__construct </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00039">39</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>    {</div>
<div class="line"><span class="lineno">   41</span>        <span class="comment">// Établir une connexion à la base de données</span></div>
<div class="line"><span class="lineno">   42</span>        $db = <a class="code hl_function" href="database_8php.html#a81a366428179a1f1020ce9438a27c51f">dbConnect</a>();</div>
<div class="line"><span class="lineno">   43</span>        <span class="comment">// Initialiser le modèle TicketModel avec la connexion à la base de données</span></div>
<div class="line"><span class="lineno">   44</span>        $this-&gt;ticketModel = <span class="keyword">new</span> <a class="code hl_class" href="class_ticket_model.html">TicketModel</a>($db);</div>
<div class="line"><span class="lineno">   45</span>    }</div>
<div class="ttc" id="aclass_ticket_model_html"><div class="ttname"><a href="class_ticket_model.html">TicketModel</a></div><div class="ttdef"><b>Definition</b> <a href="_ticket_model_8php_source.html#l00007">TicketModel.php:8</a></div></div>
<div class="ttc" id="adatabase_8php_html_a81a366428179a1f1020ce9438a27c51f"><div class="ttname"><a href="database_8php.html#a81a366428179a1f1020ce9438a27c51f">dbConnect</a></div><div class="ttdeci">dbConnect()</div><div class="ttdef"><b>Definition</b> <a href="database_8php_source.html#l00008">database.php:8</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentation des fonctions membres</h2>
<a id="a846aecdf4cf1437ed12d8536a9a167d3" name="a846aecdf4cf1437ed12d8536a9a167d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a846aecdf4cf1437ed12d8536a9a167d3">&#9670;&#160;</a></span>createAttachments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::createAttachments </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticketId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filesData</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00122">122</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  123</span>    {</div>
<div class="line"><span class="lineno">  124</span>    $maxFileSize = 10 * 1024 * 1024; <span class="comment">// 10MB</span></div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>    <span class="comment">//Si il y a des pièces jointes dans le formulaire</span></div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">if</span> (isset($filesData[<span class="stringliteral">&#39;attachment&#39;</span>])) {</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>        <span class="comment">//Pour chacun des fichiers mis en pj</span></div>
<div class="line"><span class="lineno">  130</span>        $attachments = $filesData[<span class="stringliteral">&#39;attachment&#39;</span>];</div>
<div class="line"><span class="lineno">  131</span>        </div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">foreach</span> ($attachments[<span class="stringliteral">&#39;name&#39;</span>] as $key =&gt; $name) {</div>
<div class="line"><span class="lineno">  133</span>            $attachment = array(</div>
<div class="line"><span class="lineno">  134</span>                <span class="stringliteral">&#39;name&#39;</span> =&gt; $filesData[<span class="stringliteral">&#39;attachment&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>][$key],</div>
<div class="line"><span class="lineno">  135</span>                <span class="stringliteral">&#39;type&#39;</span> =&gt; $filesData[<span class="stringliteral">&#39;attachment&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>][$key],</div>
<div class="line"><span class="lineno">  136</span>                <span class="stringliteral">&#39;tmp_name&#39;</span> =&gt; $filesData[<span class="stringliteral">&#39;attachment&#39;</span>][<span class="stringliteral">&#39;tmp_name&#39;</span>][$key],</div>
<div class="line"><span class="lineno">  137</span>                <span class="stringliteral">&#39;error&#39;</span> =&gt; $filesData[<span class="stringliteral">&#39;attachment&#39;</span>][<span class="stringliteral">&#39;error&#39;</span>][$key],</div>
<div class="line"><span class="lineno">  138</span>                <span class="stringliteral">&#39;size&#39;</span> =&gt; $filesData[<span class="stringliteral">&#39;attachment&#39;</span>][<span class="stringliteral">&#39;size&#39;</span>][$key]</div>
<div class="line"><span class="lineno">  139</span>            );</div>
<div class="line"><span class="lineno">  140</span>            <span class="keywordflow">if</span> ($attachment[<span class="stringliteral">&#39;size&#39;</span>] &gt; $maxFileSize) {</div>
<div class="line"><span class="lineno">  141</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;La taille du fichier dépasse la limite autorisée.&#39;</span>);</div>
<div class="line"><span class="lineno">  142</span>            }</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>            $attachment_name = $this-&gt;<a class="code hl_function" href="#aa7ac4a582270a0f6840984585010f860">processAttachment</a>($attachment);<span class="comment">//Vérification de l&#39;extension et récupération du nom de pj nettoyé</span></div>
<div class="line"><span class="lineno">  145</span>            $upload_dir = __DIR__ . <span class="stringliteral">&#39;/../upload&#39;</span>; <span class="comment">//Localisation du dossier où la pj est upload</span></div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>            $original_file_name = pathinfo($attachment_name, PATHINFO_FILENAME);<span class="comment">//récupération du nom de la pj</span></div>
<div class="line"><span class="lineno">  148</span>            $extension = pathinfo($attachment_name, PATHINFO_EXTENSION);<span class="comment">//récupération de l&#39;extension de la pj</span></div>
<div class="line"><span class="lineno">  149</span>            $attachment_name = $original_file_name . $ticketId . <span class="charliteral">&#39;.&#39;</span> . $extension;<span class="comment">//renomme le fichier avec TicketID</span></div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>            $new_destination = $upload_dir . DIRECTORY_SEPARATOR . $attachment_name;<span class="comment">//nom du chemin de destination complet</span></div>
<div class="line"><span class="lineno">  152</span>            var_dump($upload_dir);</div>
<div class="line"><span class="lineno">  153</span>            <span class="comment">// Read the file content from the temporary location</span></div>
<div class="line"><span class="lineno">  154</span>            $file_content = file_get_contents($attachment[<span class="stringliteral">&#39;tmp_name&#39;</span>]);</div>
<div class="line"><span class="lineno">  155</span>            <span class="comment">//Déplace le fichier la pj au chemin de destination $new_destination, si erreur envoi d&#39;une exception</span></div>
<div class="line"><span class="lineno">  156</span>            <span class="comment">// Write the file content to the new destination</span></div>
<div class="line"><span class="lineno">  157</span>            <span class="keywordflow">if</span> (file_put_contents($new_destination, $file_content) === <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  158</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;An error occurred while moving the uploaded file.&#39;</span>);</div>
<div class="line"><span class="lineno">  159</span>            }</div>
<div class="line"><span class="lineno">  160</span>            </div>
<div class="line"><span class="lineno">  161</span>            $root = realpath($_SERVER[<span class="stringliteral">&quot;DOCUMENT_ROOT&quot;</span>]); <span class="comment">//récupère la racine du chemin absolu du server C:\wamp64\www</span></div>
<div class="line"><span class="lineno">  162</span>            $relative_path = str_replace($root . DIRECTORY_SEPARATOR, <span class="stringliteral">&#39;&#39;</span>, $new_destination);<span class="comment">//supprime $root de la variable $new_destination</span></div>
<div class="line"><span class="lineno">  163</span>            $relative_path = str_replace(DIRECTORY_SEPARATOR, <span class="charliteral">&#39;/&#39;</span>, $relative_path);<span class="comment">//Remplace les séparateurs de répertoires par &#39;/&#39;</span></div>
<div class="line"><span class="lineno">  164</span>            $this-&gt;ticketModel-&gt;addAttachment($ticketId, $relative_path);<span class="comment">//Ajoute la pièce jointe dans la bdd sous le nom ticketsApp/app/src/upload/nomTicketID.ext        </span></div>
<div class="line"><span class="lineno">  165</span>            }</div>
<div class="line"><span class="lineno">  166</span>        }</div>
<div class="line"><span class="lineno">  167</span>    }</div>
<div class="ttc" id="aclass_ticket_controller_html_aa7ac4a582270a0f6840984585010f860"><div class="ttname"><a href="#aa7ac4a582270a0f6840984585010f860">TicketController\processAttachment</a></div><div class="ttdeci">processAttachment($attachment)</div><div class="ttdef"><b>Definition</b> <a href="_ticket_controller_8php_source.html#l00089">TicketController.php:89</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a07e223a0c00d9820f510eae48a420fe4" name="a07e223a0c00d9820f510eae48a420fe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07e223a0c00d9820f510eae48a420fe4">&#9670;&#160;</a></span>createTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::createTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$postData</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filesData</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00177">177</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  178</span>    {</div>
<div class="line"><span class="lineno">  179</span>        <span class="comment">// On récupère les données entrées dans le formulaire</span></div>
<div class="line"><span class="lineno">  180</span>        <span class="comment">// et nettoyage de celles-ci</span></div>
<div class="line"><span class="lineno">  181</span>        $titre = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;titre&#39;</span>);</div>
<div class="line"><span class="lineno">  182</span>        $description = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;description&#39;</span>);</div>
<div class="line"><span class="lineno">  183</span>        $produit_id = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;produit_id&#39;</span>);</div>
<div class="line"><span class="lineno">  184</span>        $type_id = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;type_id&#39;</span>);</div>
<div class="line"><span class="lineno">  185</span>        $urgence_id = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;urgence_id&#39;</span>);     </div>
<div class="line"><span class="lineno">  186</span>        $date_creation = date(<span class="stringliteral">&#39;d-m-Y&#39;</span>);</div>
<div class="line"><span class="lineno">  187</span>        $statut_id = 1; <span class="comment">//statut : en cours</span></div>
<div class="line"><span class="lineno">  188</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>        <span class="comment">// Convertir les entités HTML en caractères correspondants</span></div>
<div class="line"><span class="lineno">  191</span>        $titre = html_entity_decode($titre);</div>
<div class="line"><span class="lineno">  192</span>        $description = html_entity_decode($description);</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>        <span class="comment">// Réécrire les apostrophes pour les stocker correctement en base de données</span></div>
<div class="line"><span class="lineno">  195</span>        $titre = str_replace(<span class="stringliteral">&#39;&amp;#39;&#39;</span>, <span class="stringliteral">&quot;&#39;&quot;</span>, $titre);</div>
<div class="line"><span class="lineno">  196</span>        $description = str_replace(<span class="stringliteral">&#39;&amp;#39;&#39;</span>, <span class="stringliteral">&quot;&#39;&quot;</span>, $description);</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>        <span class="comment">// Appel de la fonction correspondante du modèle</span></div>
<div class="line"><span class="lineno">  199</span>        $ticketId = $this-&gt;ticketModel-&gt;createTicket($titre, $description, $date_creation, $statut_id, $urgence_id, $username, $produit_id, $type_id);</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>        <span class="comment">// Prépare une réponse dans un tableau en cas d&#39;erreur</span></div>
<div class="line"><span class="lineno">  202</span>        $response = array();</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>        <span class="comment">// Récupérer l&#39;adresse e-mail de l&#39;utilisateur à partir de la base de données</span></div>
<div class="line"><span class="lineno">  205</span>        $email = $this-&gt;ticketModel-&gt;getUserMail($username);</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>        <span class="comment">// Vérifiez si le ticket a été créé avec succès avant d&#39;envoyer l&#39;e-mail</span></div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">if</span> ($ticketId &amp;&amp; $email) </div>
<div class="line"><span class="lineno">  209</span>        {</div>
<div class="line"><span class="lineno">  210</span>            $this-&gt;<a class="code hl_function" href="#a846aecdf4cf1437ed12d8536a9a167d3">createAttachments</a>($ticketId, $filesData);</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>            <span class="comment">// Appel de la fonction logEvent pour enregistrer l&#39;événement</span></div>
<div class="line"><span class="lineno">  213</span>            $statut_evenement_id = 1; <span class="comment">// 1 = Opened, 2 = Solved, 3 = Closed, 4 = Attachment deleted, 5 = Attachment added</span></div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  215</span>                $this-&gt;<a class="code hl_function" href="#ab1a824cfb5f960f5a21a6ca4f57e0b28">logEvent</a>($ticketId, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  216</span>            } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line"><span class="lineno">  217</span>                <span class="comment">// Gérer l&#39;exception selon les besoins</span></div>
<div class="line"><span class="lineno">  218</span>                error_log(<span class="stringliteral">&quot;Failed to log event: &quot;</span> . $e-&gt;getMessage());</div>
<div class="line"><span class="lineno">  219</span>            }</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>            <span class="comment">// Définir l&#39;adresse e-mail de l&#39;administrateur</span></div>
<div class="line"><span class="lineno">  222</span>            $adminEmail = <span class="stringliteral">&#39;frederic.zitta@forsim.net&#39;</span>;</div>
<div class="line"><span class="lineno">  223</span>            <span class="comment">// Envoi de l&#39;e-mail à l&#39;adresse e-mail de l&#39;utilisateur</span></div>
<div class="line"><span class="lineno">  224</span>            $to = $email; <span class="comment">// Adresse e-mail de l&#39;utilisateur</span></div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>            $subject = <span class="stringliteral">&#39;Ticket créé avec succès&#39;</span>; <span class="comment">// Sujet de l&#39;e-mail</span></div>
<div class="line"><span class="lineno">  227</span>            <span class="comment">// Le contenu du message peut être personnalisé selon vos besoins</span></div>
<div class="line"><span class="lineno">  228</span>            $message = <span class="stringliteral">&quot;Cher utilisateur,\n\nVotre ticket a été créé avec succès.\n\nTitre du ticket : $titre\nDescription : $description\n\nMerci de votre demande.\nCordialement,\nVotre équipe de support.&quot;</span>;</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>            <span class="comment">// Entêtes de l&#39;e-mail</span></div>
<div class="line"><span class="lineno">  231</span>            $headers = <span class="stringliteral">&#39;From: &#39;</span> . $adminEmail . <span class="stringliteral">&quot;\r\n&quot;</span> .</div>
<div class="line"><span class="lineno">  232</span>                    <span class="stringliteral">&#39;Reply-To: &#39;</span> . $adminEmail . <span class="stringliteral">&quot;\r\n&quot;</span> .</div>
<div class="line"><span class="lineno">  233</span>                    <span class="stringliteral">&#39;X-Mailer: PHP/&#39;</span> . phpversion();</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>            <span class="comment">// Envoi de l&#39;e-mail</span></div>
<div class="line"><span class="lineno">  236</span>            mail($to, $subject, $message, $headers);</div>
<div class="line"><span class="lineno">  237</span>        } <span class="keywordflow">else</span> </div>
<div class="line"><span class="lineno">  238</span>        {</div>
<div class="line"><span class="lineno">  239</span>            $response[<span class="stringliteral">&#39;status&#39;</span>] = <span class="stringliteral">&#39;error&#39;</span>;</div>
<div class="line"><span class="lineno">  240</span>            $response[<span class="stringliteral">&#39;message&#39;</span>] = <span class="stringliteral">&#39;Failed to create ticket&#39;</span>;</div>
<div class="line"><span class="lineno">  241</span>        }</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>        header(<span class="stringliteral">&#39;Content-Type: application/json&#39;</span>);</div>
<div class="line"><span class="lineno">  244</span>        <span class="comment">// Conversion et envoi de la réponse au format JSON</span></div>
<div class="line"><span class="lineno">  245</span>        echo json_encode($response);</div>
<div class="line"><span class="lineno">  246</span>        exit;</div>
<div class="line"><span class="lineno">  247</span>    }</div>
<div class="ttc" id="aclass_ticket_controller_html_a3d1647eef3e6290674d721e2f6c75832"><div class="ttname"><a href="#a3d1647eef3e6290674d721e2f6c75832">TicketController\getSanitizedInput</a></div><div class="ttdeci">getSanitizedInput($postData, $field)</div><div class="ttdef"><b>Definition</b> <a href="_ticket_controller_8php_source.html#l00054">TicketController.php:54</a></div></div>
<div class="ttc" id="aclass_ticket_controller_html_a846aecdf4cf1437ed12d8536a9a167d3"><div class="ttname"><a href="#a846aecdf4cf1437ed12d8536a9a167d3">TicketController\createAttachments</a></div><div class="ttdeci">createAttachments($ticketId, $filesData)</div><div class="ttdef"><b>Definition</b> <a href="_ticket_controller_8php_source.html#l00122">TicketController.php:122</a></div></div>
<div class="ttc" id="aclass_ticket_controller_html_ab1a824cfb5f960f5a21a6ca4f57e0b28"><div class="ttname"><a href="#ab1a824cfb5f960f5a21a6ca4f57e0b28">TicketController\logEvent</a></div><div class="ttdeci">logEvent($ticket_id, $username, $statut_evenement_id)</div><div class="ttdef"><b>Definition</b> <a href="_ticket_controller_8php_source.html#l00257">TicketController.php:257</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a419397f13ef2dcbb2db5b5538125a398" name="a419397f13ef2dcbb2db5b5538125a398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a419397f13ef2dcbb2db5b5538125a398">&#9670;&#160;</a></span>deleteAttachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::deleteAttachment </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$attachmentId</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00689">689</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  690</span>    {</div>
<div class="line"><span class="lineno">  691</span>        <span class="comment">// Récupère le chemin du fichier à partir de la base de données</span></div>
<div class="line"><span class="lineno">  692</span>        $attachment = $this-&gt;ticketModel-&gt;getAttachment($attachmentId);</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>        <span class="keywordflow">if</span> ($attachment) {</div>
<div class="line"><span class="lineno">  695</span>            <span class="comment">// Convertit le chemin relatif en chemin absolu</span></div>
<div class="line"><span class="lineno">  696</span>            $file_path = $_SERVER[<span class="stringliteral">&#39;DOCUMENT_ROOT&#39;</span>] . <span class="stringliteral">&quot;/&quot;</span> . $attachment[<span class="stringliteral">&#39;filename&#39;</span>];</div>
<div class="line"><span class="lineno">  697</span> </div>
<div class="line"><span class="lineno">  698</span>            <span class="comment">// Vérifie que le fichier existe avant d&#39;essayer de le supprimer</span></div>
<div class="line"><span class="lineno">  699</span>            <span class="keywordflow">if</span> (file_exists($file_path)) {</div>
<div class="line"><span class="lineno">  700</span>                unlink($file_path);</div>
<div class="line"><span class="lineno">  701</span>            }</div>
<div class="line"><span class="lineno">  702</span>            <span class="comment">// Supprime l&#39;entrée de la base de données</span></div>
<div class="line"><span class="lineno">  703</span>            $this-&gt;ticketModel-&gt;deleteAttachment($attachmentId);</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>            <span class="comment">// Créer un événement pour la suppression de la pièce jointe</span></div>
<div class="line"><span class="lineno">  706</span>            $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  707</span>            $ticket_id = $attachment[<span class="stringliteral">&#39;ticket_id&#39;</span>];</div>
<div class="line"><span class="lineno">  708</span>            $statut_evenement_id = 6; <span class="comment">// 6 = Attachment deleted</span></div>
<div class="line"><span class="lineno">  709</span> </div>
<div class="line"><span class="lineno">  710</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  711</span>                $this-&gt;<a class="code hl_function" href="#ab1a824cfb5f960f5a21a6ca4f57e0b28">logEvent</a>($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  712</span>            } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line"><span class="lineno">  713</span>                <span class="comment">// Gérer l&#39;exception selon les besoins</span></div>
<div class="line"><span class="lineno">  714</span>                error_log(<span class="stringliteral">&quot;Failed to log event: &quot;</span> . $e-&gt;getMessage());</div>
<div class="line"><span class="lineno">  715</span>            }</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>            echo <span class="stringliteral">&#39;Attachment deleted.&#39;</span>;</div>
<div class="line"><span class="lineno">  718</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  719</span>            echo <span class="stringliteral">&#39;No attachment found with this ID.&#39;</span>;</div>
<div class="line"><span class="lineno">  720</span>        }</div>
<div class="line"><span class="lineno">  721</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad942815622a28da71ad4de09234e4c3b" name="ad942815622a28da71ad4de09234e4c3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad942815622a28da71ad4de09234e4c3b">&#9670;&#160;</a></span>displayProducts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::displayProducts </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00763">763</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  764</span>    {</div>
<div class="line"><span class="lineno">  765</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  766</span>        $produits = $this-&gt;ticketModel-&gt;getProduitsByUser($username);</div>
<div class="line"><span class="lineno">  767</span>        $firstproduit = $this-&gt;ticketModel-&gt;getFirstProduitByUser($username);</div>
<div class="line"><span class="lineno">  768</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;index&#39;</span>, [<span class="stringliteral">&#39;produits&#39;</span> =&gt; $produits, <span class="stringliteral">&#39;firstproduit&#39;</span> =&gt; $firstproduit]);</div>
<div class="line"><span class="lineno">  769</span>    }</div>
<div class="ttc" id="aclass_ticket_controller_html_a4ce83f85f5ae79ef70adbf7b67317eca"><div class="ttname"><a href="#a4ce83f85f5ae79ef70adbf7b67317eca">TicketController\render</a></div><div class="ttdeci">render($view, $data=[])</div><div class="ttdef"><b>Definition</b> <a href="_ticket_controller_8php_source.html#l00073">TicketController.php:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad0012ff465f618f081959d32cb0ebbed" name="ad0012ff465f618f081959d32cb0ebbed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0012ff465f618f081959d32cb0ebbed">&#9670;&#160;</a></span>getAttachmentsTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getAttachmentsTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00751">751</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  752</span>    {</div>
<div class="line"><span class="lineno">  753</span>        $attachments = $this-&gt;ticketModel-&gt;getAttachmentsTicket($ticket_id);</div>
<div class="line"><span class="lineno">  754</span>        header(<span class="stringliteral">&#39;Content-Type: application/json&#39;</span>);</div>
<div class="line"><span class="lineno">  755</span>        echo json_encode($attachments);</div>
<div class="line"><span class="lineno">  756</span>        exit; </div>
<div class="line"><span class="lineno">  757</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a78b3cd2c5dcf85a1137a986fe09ec6a5" name="a78b3cd2c5dcf85a1137a986fe09ec6a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b3cd2c5dcf85a1137a986fe09ec6a5">&#9670;&#160;</a></span>getClosedDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getClosedDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00382">382</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  383</span>    {</div>
<div class="line"><span class="lineno">  384</span>        $ticket = $this-&gt;ticketModel-&gt;getClosedDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  385</span>        $attachments = $this-&gt;ticketModel-&gt;getAttachmentsTicket($ticket_id);</div>
<div class="line"><span class="lineno">  386</span>        $evenements = $this-&gt;ticketModel-&gt;getTicketEventHistory($ticket_id, $username);</div>
<div class="line"><span class="lineno">  387</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/closed_details_view&#39;</span>, [<span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket, <span class="stringliteral">&#39;attachments&#39;</span> =&gt; $attachments, <span class="stringliteral">&#39;username&#39;</span>=&gt; $username, <span class="stringliteral">&#39;evenements&#39;</span> =&gt; $evenements]);</div>
<div class="line"><span class="lineno">  388</span>        exit; </div>
<div class="line"><span class="lineno">  389</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0dbfdb594d3404efd5cebd7dfc59e88f" name="a0dbfdb594d3404efd5cebd7dfc59e88f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dbfdb594d3404efd5cebd7dfc59e88f">&#9670;&#160;</a></span>getClosedTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getClosedTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00352">352</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  353</span>    {</div>
<div class="line"><span class="lineno">  354</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  355</span>        $tickets = $this-&gt;ticketModel-&gt;getClosedTicket($produit_id, $username);</div>
<div class="line"><span class="lineno">  356</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/closed_tickets_view&#39;</span>, [<span class="stringliteral">&#39;tickets&#39;</span> =&gt; $tickets, <span class="stringliteral">&#39;produit_id&#39;</span> =&gt; $produit_id]);</div>
<div class="line"><span class="lineno">  357</span>        exit; </div>
<div class="line"><span class="lineno">  358</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a64709ea476021931f9ffb75f2381e1f9" name="a64709ea476021931f9ffb75f2381e1f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64709ea476021931f9ffb75f2381e1f9">&#9670;&#160;</a></span>getOpenTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getOpenTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00324">324</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  324</span>                                               {</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  327</span>        $tickets = $this-&gt;ticketModel-&gt;getOpenTicket($produit_id, $username);</div>
<div class="line"><span class="lineno">  328</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/open_tickets_view&#39;</span>, [<span class="stringliteral">&#39;tickets&#39;</span> =&gt; $tickets]);</div>
<div class="line"><span class="lineno">  329</span>        exit; </div>
<div class="line"><span class="lineno">  330</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a23323cf0556b491ef18c31e64b90b431" name="a23323cf0556b491ef18c31e64b90b431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23323cf0556b491ef18c31e64b90b431">&#9670;&#160;</a></span>getProduit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getProduit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00297">297</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  298</span>    {</div>
<div class="line"><span class="lineno">  299</span>        <span class="comment">// Récupère les données de la table produit depuis le modèle</span></div>
<div class="line"><span class="lineno">  300</span>        $produits = $this-&gt;ticketModel-&gt;getProduit();</div>
<div class="line"><span class="lineno">  301</span>        <span class="comment">// Charge la vue latérale avec les données des produits</span></div>
<div class="line"><span class="lineno">  302</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;sidebar&#39;</span>, [<span class="stringliteral">&#39;produits&#39;</span> =&gt; $produits]);</div>
<div class="line"><span class="lineno">  303</span>        exit;</div>
<div class="line"><span class="lineno">  304</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d1647eef3e6290674d721e2f6c75832" name="a3d1647eef3e6290674d721e2f6c75832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d1647eef3e6290674d721e2f6c75832">&#9670;&#160;</a></span>getSanitizedInput()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getSanitizedInput </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$postData</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$field</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00054">54</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   55</span>    {</div>
<div class="line"><span class="lineno">   56</span>        <span class="comment">//On vérifie si le champ existe dans le taleau $postData</span></div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">if</span> (isset($postData[$field])) {</div>
<div class="line"><span class="lineno">   58</span>            <span class="comment">// Nettoie la valeur du champ avec le filtre FILTER_SANITIZE_SPECIAL_CHARS</span></div>
<div class="line"><span class="lineno">   59</span>            $sanitizedValue = filter_var($postData[$field], FILTER_SANITIZE_SPECIAL_CHARS);</div>
<div class="line"><span class="lineno">   60</span>            <span class="keywordflow">return</span> $sanitizedValue;</div>
<div class="line"><span class="lineno">   61</span>        }</div>
<div class="line"><span class="lineno">   62</span>    </div>
<div class="line"><span class="lineno">   63</span>        <span class="comment">//Si le champ n&#39;existe pas , renvoi une chaine de caractère vide</span></div>
<div class="line"><span class="lineno">   64</span>        <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><span class="lineno">   65</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f362886cb39b6c982cc3bb1c15ee454" name="a9f362886cb39b6c982cc3bb1c15ee454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f362886cb39b6c982cc3bb1c15ee454">&#9670;&#160;</a></span>getSolvedDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getSolvedDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00398">398</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  399</span>    {</div>
<div class="line"><span class="lineno">  400</span>        $ticket = $this-&gt;ticketModel-&gt;getSolvedDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  401</span>        $attachments = $this-&gt;ticketModel-&gt;getAttachmentsTicket($ticket_id);</div>
<div class="line"><span class="lineno">  402</span>        $evenements = $this-&gt;ticketModel-&gt;getTicketEventHistory($ticket_id, $username);</div>
<div class="line"><span class="lineno">  403</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/solved_details_view&#39;</span>, [<span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket, <span class="stringliteral">&#39;attachments&#39;</span> =&gt; $attachments, <span class="stringliteral">&#39;username&#39;</span>=&gt; $username, <span class="stringliteral">&#39;evenements&#39;</span> =&gt; $evenements]);       </div>
<div class="line"><span class="lineno">  404</span>        exit; </div>
<div class="line"><span class="lineno">  405</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bfa1f2e924650af7260dd3a10a0dd81" name="a5bfa1f2e924650af7260dd3a10a0dd81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bfa1f2e924650af7260dd3a10a0dd81">&#9670;&#160;</a></span>getSolvedTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getSolvedTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$selectedProduct</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00338">338</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  339</span>    {</div>
<div class="line"><span class="lineno">  340</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  341</span>        $tickets = $this-&gt;ticketModel-&gt;getSolvedTicket($selectedProduct, $username);</div>
<div class="line"><span class="lineno">  342</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/solved_tickets_view&#39;</span>, [<span class="stringliteral">&#39;tickets&#39;</span> =&gt; $tickets, <span class="stringliteral">&#39;selectedProduct&#39;</span> =&gt; $selectedProduct]);</div>
<div class="line"><span class="lineno">  343</span>        exit; </div>
<div class="line"><span class="lineno">  344</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="afbe155547a07f88a6692ae845a62f771" name="afbe155547a07f88a6692ae845a62f771"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbe155547a07f88a6692ae845a62f771">&#9670;&#160;</a></span>getTicketClosedSaveDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getTicketClosedSaveDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00453">453</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  454</span>    {</div>
<div class="line"><span class="lineno">  455</span>        $ticket = $this-&gt;ticketModel-&gt;getClosedDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  456</span>        $attachments = $this-&gt;ticketModel-&gt;getAttachmentsTicket($ticket_id);</div>
<div class="line"><span class="lineno">  457</span>        $ticketsave = $this-&gt;ticketModel-&gt;getTicketSaveDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/ticket_save_closed_details_view&#39;</span>, [</div>
<div class="line"><span class="lineno">  460</span>            <span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket,</div>
<div class="line"><span class="lineno">  461</span>            <span class="stringliteral">&#39;attachments&#39;</span> =&gt; $attachments,</div>
<div class="line"><span class="lineno">  462</span>            <span class="stringliteral">&#39;ticketsave&#39;</span> =&gt; $ticketsave</div>
<div class="line"><span class="lineno">  463</span>        ]);</div>
<div class="line"><span class="lineno">  464</span>        exit;</div>
<div class="line"><span class="lineno">  465</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a235d577313774da3928938bfb8ae957a" name="a235d577313774da3928938bfb8ae957a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a235d577313774da3928938bfb8ae957a">&#9670;&#160;</a></span>getTicketDetailsAndEvents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getTicketDetailsAndEvents </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00366">366</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  367</span>    {</div>
<div class="line"><span class="lineno">  368</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  369</span>        $ticket = $this-&gt;ticketModel-&gt;getTicketDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  370</span>        $attachments = $this-&gt;ticketModel-&gt;getAttachmentsTicket($ticket_id,);</div>
<div class="line"><span class="lineno">  371</span>        $evenements = $this-&gt;ticketModel-&gt;getTicketEventHistory($ticket_id, $username);</div>
<div class="line"><span class="lineno">  372</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/details_ticket_view&#39;</span>, [<span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket, <span class="stringliteral">&#39;attachments&#39;</span> =&gt; $attachments, <span class="stringliteral">&#39;username&#39;</span>=&gt; $username, <span class="stringliteral">&#39;evenements&#39;</span> =&gt; $evenements]);</div>
<div class="line"><span class="lineno">  373</span>        exit; </div>
<div class="line"><span class="lineno">  374</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2998cabb018a768575c74b253d2ac5ee" name="a2998cabb018a768575c74b253d2ac5ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2998cabb018a768575c74b253d2ac5ee">&#9670;&#160;</a></span>getTicketMessages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getTicketMessages </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00575">575</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  575</span>                                                             {</div>
<div class="line"><span class="lineno">  576</span>        $ticket = $this-&gt;ticketModel-&gt;getTicketDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  577</span>        $allMessages = $this-&gt;ticketModel-&gt;getAllTicketMessages($ticket_id, $username);</div>
<div class="line"><span class="lineno">  578</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/ticket_chat_view&#39;</span>, [<span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket, <span class="stringliteral">&#39;messages&#39;</span> =&gt; $allMessages]);</div>
<div class="line"><span class="lineno">  579</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0aee3a7b99cf332d4ac740e028baef55" name="a0aee3a7b99cf332d4ac740e028baef55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aee3a7b99cf332d4ac740e028baef55">&#9670;&#160;</a></span>getTicketMessagesClosed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getTicketMessagesClosed </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00601">601</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  601</span>                                                                   {</div>
<div class="line"><span class="lineno">  602</span>        $ticket = $this-&gt;ticketModel-&gt;getClosedDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  603</span>        $allMessages = $this-&gt;ticketModel-&gt;getAllTicketMessages($ticket_id, $username);</div>
<div class="line"><span class="lineno">  604</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/ticket_chat_closed_view&#39;</span>, [<span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket, <span class="stringliteral">&#39;messages&#39;</span> =&gt; $allMessages]);</div>
<div class="line"><span class="lineno">  605</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a71eeb3de27180dbc313c0735f58771cf" name="a71eeb3de27180dbc313c0735f58771cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71eeb3de27180dbc313c0735f58771cf">&#9670;&#160;</a></span>getTicketMessagesSolved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getTicketMessagesSolved </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00588">588</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  588</span>                                                                   {</div>
<div class="line"><span class="lineno">  589</span>        $ticket = $this-&gt;ticketModel-&gt;getSolvedDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  590</span>        $allMessages = $this-&gt;ticketModel-&gt;getAllTicketMessages($ticket_id, $username);</div>
<div class="line"><span class="lineno">  591</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/ticket_chat_solved_view&#39;</span>, [<span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket, <span class="stringliteral">&#39;messages&#39;</span> =&gt; $allMessages]);</div>
<div class="line"><span class="lineno">  592</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aed8f055d57290527b30f2deba64a69af" name="aed8f055d57290527b30f2deba64a69af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed8f055d57290527b30f2deba64a69af">&#9670;&#160;</a></span>getTicketSaveDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getTicketSaveDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00413">413</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  414</span>    {</div>
<div class="line"><span class="lineno">  415</span>        $ticket = $this-&gt;ticketModel-&gt;getTicketDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  416</span>        $attachments = $this-&gt;ticketModel-&gt;getAttachmentsTicket($ticket_id);</div>
<div class="line"><span class="lineno">  417</span>        $ticketsave = $this-&gt;ticketModel-&gt;getTicketSaveDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/ticket_save_details_view&#39;</span>, [</div>
<div class="line"><span class="lineno">  420</span>            <span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket,</div>
<div class="line"><span class="lineno">  421</span>            <span class="stringliteral">&#39;attachments&#39;</span> =&gt; $attachments,</div>
<div class="line"><span class="lineno">  422</span>            <span class="stringliteral">&#39;ticketsave&#39;</span> =&gt; $ticketsave</div>
<div class="line"><span class="lineno">  423</span>        ]);</div>
<div class="line"><span class="lineno">  424</span>        exit;</div>
<div class="line"><span class="lineno">  425</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a899f4503616ce09659286c42671450d9" name="a899f4503616ce09659286c42671450d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a899f4503616ce09659286c42671450d9">&#9670;&#160;</a></span>getTicketSolvedSaveDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getTicketSolvedSaveDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00433">433</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  434</span>    {</div>
<div class="line"><span class="lineno">  435</span>        $ticket = $this-&gt;ticketModel-&gt;getSolvedDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  436</span>        $attachments = $this-&gt;ticketModel-&gt;getAttachmentsTicket($ticket_id);</div>
<div class="line"><span class="lineno">  437</span>        $ticketsave = $this-&gt;ticketModel-&gt;getTicketSaveDetails($ticket_id, $username);</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/ticket_save_solved_details_view&#39;</span>, [</div>
<div class="line"><span class="lineno">  440</span>            <span class="stringliteral">&#39;ticket&#39;</span> =&gt; $ticket,</div>
<div class="line"><span class="lineno">  441</span>            <span class="stringliteral">&#39;attachments&#39;</span> =&gt; $attachments,</div>
<div class="line"><span class="lineno">  442</span>            <span class="stringliteral">&#39;ticketsave&#39;</span> =&gt; $ticketsave</div>
<div class="line"><span class="lineno">  443</span>        ]);</div>
<div class="line"><span class="lineno">  444</span>        exit;</div>
<div class="line"><span class="lineno">  445</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a6648402ddeb3f1f26e1af2a4726f92" name="a8a6648402ddeb3f1f26e1af2a4726f92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a6648402ddeb3f1f26e1af2a4726f92">&#9670;&#160;</a></span>getType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getType </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00310">310</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  311</span>    {</div>
<div class="line"><span class="lineno">  312</span>        $types = $this-&gt;ticketModel-&gt;getType();</div>
<div class="line"><span class="lineno">  313</span>        <span class="comment">//var_dump($types);</span></div>
<div class="line"><span class="lineno">  314</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/create_ticket_view&#39;</span>, [<span class="stringliteral">&#39;types&#39;</span> =&gt; $types]);</div>
<div class="line"><span class="lineno">  315</span>    exit; </div>
<div class="line"><span class="lineno">  316</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9489a11ff7403bb1afb1fcc8f63f88ab" name="a9489a11ff7403bb1afb1fcc8f63f88ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9489a11ff7403bb1afb1fcc8f63f88ab">&#9670;&#160;</a></span>getUrgence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getUrgence </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00286">286</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  287</span>    {</div>
<div class="line"><span class="lineno">  288</span>        $urgences = $this-&gt;ticketModel-&gt;getUrgence();</div>
<div class="line"><span class="lineno">  289</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/create_ticket_view&#39;</span>, [<span class="stringliteral">&#39;urgences&#39;</span> =&gt; $urgences]);</div>
<div class="line"><span class="lineno">  290</span>        exit; </div>
<div class="line"><span class="lineno">  291</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a388fefc96acb2c45a0b1dd916988f164" name="a388fefc96acb2c45a0b1dd916988f164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a388fefc96acb2c45a0b1dd916988f164">&#9670;&#160;</a></span>getUserEventHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::getUserEventHistory </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00274">274</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  274</span>                                                    {</div>
<div class="line"><span class="lineno">  275</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  276</span>        $evenements = $this-&gt;ticketModel-&gt;getUserEventHistory($produit_id, $username);</div>
<div class="line"><span class="lineno">  277</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;index&#39;</span>, [<span class="stringliteral">&#39;evenements&#39;</span> =&gt; $evenements]);</div>
<div class="line"><span class="lineno">  278</span>        $this-&gt;<a class="code hl_function" href="#a4ce83f85f5ae79ef70adbf7b67317eca">render</a>(<span class="stringliteral">&#39;tickets/details/details_ticket_view&#39;</span>, [<span class="stringliteral">&#39;evenements&#39;</span> =&gt; $evenements]);</div>
<div class="line"><span class="lineno">  279</span>        exit;</div>
<div class="line"><span class="lineno">  280</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1a824cfb5f960f5a21a6ca4f57e0b28" name="ab1a824cfb5f960f5a21a6ca4f57e0b28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1a824cfb5f960f5a21a6ca4f57e0b28">&#9670;&#160;</a></span>logEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::logEvent </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$statut_evenement_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00257">257</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  258</span>    {</div>
<div class="line"><span class="lineno">  259</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  260</span>            $this-&gt;ticketModel-&gt;logEvent($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  261</span>        } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line"><span class="lineno">  262</span>            <span class="comment">// Gérer l&#39;exception en enregistrant l&#39;erreur dans le journal des erreurs</span></div>
<div class="line"><span class="lineno">  263</span>            error_log(<span class="stringliteral">&quot;Failed to log event: &quot;</span> . $e-&gt;getMessage());</div>
<div class="line"><span class="lineno">  264</span>            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Failed to log event.&#39;</span>);</div>
<div class="line"><span class="lineno">  265</span>        }</div>
<div class="line"><span class="lineno">  266</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af1659b9e5e7380453dc8961f2c895169" name="af1659b9e5e7380453dc8961f2c895169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1659b9e5e7380453dc8961f2c895169">&#9670;&#160;</a></span>ModifAttachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::ModifAttachment </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filesData</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00729">729</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  730</span>    {</div>
<div class="line"><span class="lineno">  731</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  732</span>        <span class="comment">// Récupère l&#39;id du ticket à partir de l&#39;url</span></div>
<div class="line"><span class="lineno">  733</span>        $ticketId = $this-&gt;ticketModel-&gt;getTicketDetails($ticket_id, $username)[<span class="stringliteral">&#39;ticket_id&#39;</span>];</div>
<div class="line"><span class="lineno">  734</span>        <span class="keywordflow">try</span> </div>
<div class="line"><span class="lineno">  735</span>        {</div>
<div class="line"><span class="lineno">  736</span>            $this-&gt;<a class="code hl_function" href="#a846aecdf4cf1437ed12d8536a9a167d3">createAttachments</a>($ticketId, $filesData);</div>
<div class="line"><span class="lineno">  737</span>            echo <span class="stringliteral">&#39;Attachment added.&#39;</span>;</div>
<div class="line"><span class="lineno">  738</span>        } <span class="keywordflow">catch</span> (Exception $e)</div>
<div class="line"><span class="lineno">  739</span>         {</div>
<div class="line"><span class="lineno">  740</span>            echo <span class="stringliteral">&quot;Attachment wasn&#39;t added.&quot;</span>;</div>
<div class="line"><span class="lineno">  741</span>        }</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7ac4a582270a0f6840984585010f860" name="aa7ac4a582270a0f6840984585010f860"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7ac4a582270a0f6840984585010f860">&#9670;&#160;</a></span>processAttachment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::processAttachment </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$attachment</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00089">89</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>    {</div>
<div class="line"><span class="lineno">   91</span>        <span class="comment">//On vérifie s&#39;il y a eu une erreur lors de l&#39;upload du fichier</span></div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">if</span> ($attachment[<span class="stringliteral">&#39;error&#39;</span>] !== UPLOAD_ERR_OK) {</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;An error occurred with the file upload.&#39;</span>);</div>
<div class="line"><span class="lineno">   94</span>        }</div>
<div class="line"><span class="lineno">   95</span>        <span class="comment">//On récupère le nom original du fichier</span></div>
<div class="line"><span class="lineno">   96</span>        $original_file_name = pathinfo($attachment[<span class="stringliteral">&#39;name&#39;</span>], PATHINFO_FILENAME);</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>        <span class="comment">//On récupère l&#39;extension du fichier&#39;</span></div>
<div class="line"><span class="lineno">   99</span>        $extension = pathinfo($attachment[<span class="stringliteral">&#39;name&#39;</span>], PATHINFO_EXTENSION);</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>        <span class="comment">// Tableau contenant les extensions autorisées</span></div>
<div class="line"><span class="lineno">  102</span>        $allowedExtensions = [<span class="stringliteral">&#39;jpg&#39;</span>, <span class="stringliteral">&#39;jpeg&#39;</span>, <span class="stringliteral">&#39;png&#39;</span>, <span class="stringliteral">&#39;pdf&#39;</span>, <span class="stringliteral">&#39;doc&#39;</span>, <span class="stringliteral">&#39;docx&#39;</span>, <span class="stringliteral">&#39;zip&#39;</span>, <span class="stringliteral">&#39;rar&#39;</span>];</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>        <span class="comment">//On vérifie si l&#39;extension du fichier est une extension autorisé</span></div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> (!in_array($extension, $allowedExtensions)) {</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Invalid file extension. Only JPG, PNG, DOCX, ZIP, RAR, and PDF files are allowed.&#39;</span>);</div>
<div class="line"><span class="lineno">  107</span>        }</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>        <span class="comment">//Générer le nom de la pièce jointe épurée en combinant le nom du fichier d&#39;origine et l&#39;extension</span></div>
<div class="line"><span class="lineno">  110</span>        $attachment_name = $original_file_name . <span class="charliteral">&#39;.&#39;</span> . $extension;</div>
<div class="line"><span class="lineno">  111</span>        <span class="comment">//On renvoi le nom de fichier nettoyé</span></div>
<div class="line"><span class="lineno">  112</span>        <span class="keywordflow">return</span> $attachment_name;</div>
<div class="line"><span class="lineno">  113</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ce83f85f5ae79ef70adbf7b67317eca" name="a4ce83f85f5ae79ef70adbf7b67317eca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ce83f85f5ae79ef70adbf7b67317eca">&#9670;&#160;</a></span>render()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::render </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$view</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$data</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[]</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00073">73</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   74</span>    {</div>
<div class="line"><span class="lineno">   75</span>        extract(<a class="code hl_variable" href="test_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>);</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>        <span class="comment">// Inclure le fichier de vue correspondant avec les données passées</span></div>
<div class="line"><span class="lineno">   78</span>        include(__DIR__ . <span class="stringliteral">&quot;/../Views/{$view}.php&quot;</span>);</div>
<div class="line"><span class="lineno">   79</span>        exit;</div>
<div class="line"><span class="lineno">   80</span>    }</div>
<div class="ttc" id="atest_8php_html_a6efc15b5a2314dd4b5aaa556a375c6d6"><div class="ttname"><a href="test_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a></div><div class="ttdeci">$data</div><div class="ttdef"><b>Definition</b> <a href="test_8php_source.html#l00007">test.php:7</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3cc89b2248a3e3b8c3d9e522ceaba5c" name="ae3cc89b2248a3e3b8c3d9e522ceaba5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3cc89b2248a3e3b8c3d9e522ceaba5c">&#9670;&#160;</a></span>sendMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::sendMessage </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$postData</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00614">614</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  614</span>                                                     {</div>
<div class="line"><span class="lineno">  615</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  616</span>        $statut_evenement_id = 8; <span class="comment">// 8 = Message</span></div>
<div class="line"><span class="lineno">  617</span>        <span class="comment">// Valide et nettoie les données</span></div>
<div class="line"><span class="lineno">  618</span>        $ticket_id = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;ticket_id&#39;</span>);</div>
<div class="line"><span class="lineno">  619</span>        $sendMessage = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;message&#39;</span>);</div>
<div class="line"><span class="lineno">  620</span>        $this-&gt;ticketModel-&gt;sendMessage($ticket_id, $sendMessage, $username);</div>
<div class="line"><span class="lineno">  621</span>        $this-&gt;ticketModel-&gt;logEvent($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  622</span>        header(<span class="stringliteral">&#39;Location: /ticketsApp/config/routes.php/ticket-message/&#39;</span> . $ticket_id);</div>
<div class="line"><span class="lineno">  623</span>        exit;</div>
<div class="line"><span class="lineno">  624</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="abd59bcd78822d3237539f23d7b7d49a4" name="abd59bcd78822d3237539f23d7b7d49a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd59bcd78822d3237539f23d7b7d49a4">&#9670;&#160;</a></span>sendMessageClosed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::sendMessageClosed </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$postData</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00652">652</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  652</span>                                                           {</div>
<div class="line"><span class="lineno">  653</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  654</span>        $statut_evenement_id = 8; <span class="comment">// 8 = Message</span></div>
<div class="line"><span class="lineno">  655</span>        <span class="comment">// Valide et nettoie les données</span></div>
<div class="line"><span class="lineno">  656</span>        $ticket_id = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;ticket_id&#39;</span>);</div>
<div class="line"><span class="lineno">  657</span>        $sendMessage = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;message&#39;</span>);</div>
<div class="line"><span class="lineno">  658</span>        $this-&gt;ticketModel-&gt;sendMessage($ticket_id, $sendMessage, $username);</div>
<div class="line"><span class="lineno">  659</span>        $this-&gt;ticketModel-&gt;logEvent($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  660</span>        header(<span class="stringliteral">&#39;Location: /ticketsApp/config/routes.php/ticket-message-closed/&#39;</span> . $ticket_id);</div>
<div class="line"><span class="lineno">  661</span>        exit;</div>
<div class="line"><span class="lineno">  662</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa42e75461a7380b32c461b17020ac2fb" name="aa42e75461a7380b32c461b17020ac2fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa42e75461a7380b32c461b17020ac2fb">&#9670;&#160;</a></span>sendMessageSolved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::sendMessageSolved </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$postData</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00633">633</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  633</span>                                                           {</div>
<div class="line"><span class="lineno">  634</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  635</span>        $statut_evenement_id = 8; <span class="comment">// 8 = Message</span></div>
<div class="line"><span class="lineno">  636</span>        <span class="comment">// Valide et nettoie les données</span></div>
<div class="line"><span class="lineno">  637</span>        $ticket_id = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;ticket_id&#39;</span>);</div>
<div class="line"><span class="lineno">  638</span>        $sendMessage = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;message&#39;</span>);</div>
<div class="line"><span class="lineno">  639</span>        $this-&gt;ticketModel-&gt;sendMessage($ticket_id, $sendMessage, $username);</div>
<div class="line"><span class="lineno">  640</span>        $this-&gt;ticketModel-&gt;logEvent($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  641</span>        header(<span class="stringliteral">&#39;Location: /ticketsApp/config/routes.php/ticket-message-solved/&#39;</span> . $ticket_id);</div>
<div class="line"><span class="lineno">  642</span>        exit;</div>
<div class="line"><span class="lineno">  643</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a35bc1ccea9525dd91c438e4d1bf1c6ef" name="a35bc1ccea9525dd91c438e4d1bf1c6ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35bc1ccea9525dd91c438e4d1bf1c6ef">&#9670;&#160;</a></span>setClose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::setClose </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00506">506</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  507</span>    {</div>
<div class="line"><span class="lineno">  508</span>        </div>
<div class="line"><span class="lineno">  509</span>        $rowsAffected = $this-&gt;ticketModel-&gt;setClose($ticket_id);</div>
<div class="line"><span class="lineno">  510</span>        </div>
<div class="line"><span class="lineno">  511</span>        <span class="keywordflow">if</span> ($rowsAffected &gt; 0) {</div>
<div class="line"><span class="lineno">  512</span>            <span class="comment">// La requête a réussi, créer un événement pour la fermeture du ticket</span></div>
<div class="line"><span class="lineno">  513</span>            $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  514</span>            $statut_evenement_id = 4; <span class="comment">// 4 = Closed</span></div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  517</span>                $this-&gt;<a class="code hl_function" href="#ab1a824cfb5f960f5a21a6ca4f57e0b28">logEvent</a>($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  518</span>            } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line"><span class="lineno">  519</span>                <span class="comment">// Gérer l&#39;exception selon les besoins</span></div>
<div class="line"><span class="lineno">  520</span>                error_log(<span class="stringliteral">&quot;Failed to log event: &quot;</span> . $e-&gt;getMessage());</div>
<div class="line"><span class="lineno">  521</span>            }</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>            <span class="comment">// Renvoie une réponse JSON avec success=true</span></div>
<div class="line"><span class="lineno">  524</span>            echo json_encode([<span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">true</span>]);</div>
<div class="line"><span class="lineno">  525</span>            exit;</div>
<div class="line"><span class="lineno">  526</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  527</span>            <span class="comment">// La requête a échoué, renvoie une réponse JSON avec une erreur</span></div>
<div class="line"><span class="lineno">  528</span>            http_response_code(500);</div>
<div class="line"><span class="lineno">  529</span>            echo json_encode([<span class="stringliteral">&#39;error&#39;</span> =&gt; <span class="stringliteral">&#39;Failed to update ticket status&#39;</span>]);</div>
<div class="line"><span class="lineno">  530</span>            exit;</div>
<div class="line"><span class="lineno">  531</span>        }</div>
<div class="line"><span class="lineno">  532</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b14f653b083433497a9a14e4efee1b4" name="a4b14f653b083433497a9a14e4efee1b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b14f653b083433497a9a14e4efee1b4">&#9670;&#160;</a></span>setOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::setOpen </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00473">473</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  474</span>    {</div>
<div class="line"><span class="lineno">  475</span>        $rowsAffected = $this-&gt;ticketModel-&gt;setOpen($ticket_id);</div>
<div class="line"><span class="lineno">  476</span>        </div>
<div class="line"><span class="lineno">  477</span>        <span class="keywordflow">if</span> ($rowsAffected &gt; 0) {</div>
<div class="line"><span class="lineno">  478</span>            <span class="comment">// La requête a réussi, créer un événement pour la fermeture du ticket</span></div>
<div class="line"><span class="lineno">  479</span>            $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  480</span>            $statut_evenement_id = 2; <span class="comment">// 1 = Opened, 2 = Re-Opened, 3 = Solved, 4 = Closed, 5 = Attachment added, 6 = Attachment deleted</span></div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  483</span>                $this-&gt;<a class="code hl_function" href="#ab1a824cfb5f960f5a21a6ca4f57e0b28">logEvent</a>($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  484</span>            } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line"><span class="lineno">  485</span>                <span class="comment">// Gérer l&#39;exception selon les besoins</span></div>
<div class="line"><span class="lineno">  486</span>                error_log(<span class="stringliteral">&quot;Failed to log event: &quot;</span> . $e-&gt;getMessage());</div>
<div class="line"><span class="lineno">  487</span>            }</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>            <span class="comment">// La requête a réussi, renvoyez une réponse de succès</span></div>
<div class="line"><span class="lineno">  490</span>            echo json_encode([<span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">true</span>]);</div>
<div class="line"><span class="lineno">  491</span>            exit;</div>
<div class="line"><span class="lineno">  492</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  493</span>            <span class="comment">// La requête a échoué, renvoyez une erreur</span></div>
<div class="line"><span class="lineno">  494</span>            http_response_code(500);</div>
<div class="line"><span class="lineno">  495</span>            echo json_encode([<span class="stringliteral">&#39;error&#39;</span> =&gt; <span class="stringliteral">&#39;Failed to update ticket status&#39;</span>]);</div>
<div class="line"><span class="lineno">  496</span>            exit;</div>
<div class="line"><span class="lineno">  497</span>        }</div>
<div class="line"><span class="lineno">  498</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a467232670497f6ccb32e34232678c77a" name="a467232670497f6ccb32e34232678c77a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a467232670497f6ccb32e34232678c77a">&#9670;&#160;</a></span>setSolve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::setSolve </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00541">541</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  542</span>    {</div>
<div class="line"><span class="lineno">  543</span>        </div>
<div class="line"><span class="lineno">  544</span>        $rowsAffected = $this-&gt;ticketModel-&gt;setSolve($ticket_id);</div>
<div class="line"><span class="lineno">  545</span>            </div>
<div class="line"><span class="lineno">  546</span>        <span class="keywordflow">if</span> ($rowsAffected &gt; 0) {</div>
<div class="line"><span class="lineno">  547</span>            <span class="comment">// La requête a réussi, créer un événement pour la fermeture du ticket</span></div>
<div class="line"><span class="lineno">  548</span>            $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  549</span>            $statut_evenement_id = 3; <span class="comment">// 3 = Solved</span></div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  552</span>                $this-&gt;<a class="code hl_function" href="#ab1a824cfb5f960f5a21a6ca4f57e0b28">logEvent</a>($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  553</span>            } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line"><span class="lineno">  554</span>                <span class="comment">// Gérer l&#39;exception selon les besoins</span></div>
<div class="line"><span class="lineno">  555</span>                error_log(<span class="stringliteral">&quot;Failed to log event: &quot;</span> . $e-&gt;getMessage());</div>
<div class="line"><span class="lineno">  556</span>            }</div>
<div class="line"><span class="lineno">  557</span>            <span class="comment">// La requête a réussi, renvoyez une réponse JSON avec success=true</span></div>
<div class="line"><span class="lineno">  558</span>            echo json_encode([<span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">true</span>]);</div>
<div class="line"><span class="lineno">  559</span>            exit;</div>
<div class="line"><span class="lineno">  560</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  561</span>            <span class="comment">// La requête a échoué, renvoyez une réponse JSON avec une erreur</span></div>
<div class="line"><span class="lineno">  562</span>            http_response_code(500);</div>
<div class="line"><span class="lineno">  563</span>            echo json_encode([<span class="stringliteral">&#39;error&#39;</span> =&gt; <span class="stringliteral">&#39;Failed to update ticket status&#39;</span>]);</div>
<div class="line"><span class="lineno">  564</span>            exit;</div>
<div class="line"><span class="lineno">  565</span>        }</div>
<div class="line"><span class="lineno">  566</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac585997b4a6edded075269e6a6608ab3" name="ac585997b4a6edded075269e6a6608ab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac585997b4a6edded075269e6a6608ab3">&#9670;&#160;</a></span>updateTicketsDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::updateTicketsDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$postData</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00670">670</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  670</span>                                                    {</div>
<div class="line"><span class="lineno">  671</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  672</span>        $statut_evenement_id = 7; <span class="comment">// 7 = Text Changed</span></div>
<div class="line"><span class="lineno">  673</span>        <span class="comment">// Valide et nettoie les données</span></div>
<div class="line"><span class="lineno">  674</span>        $ticket_id = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;ticket_id&#39;</span>);</div>
<div class="line"><span class="lineno">  675</span>        $newTitle = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;titre&#39;</span>);</div>
<div class="line"><span class="lineno">  676</span>        $newDescription = $this-&gt;<a class="code hl_function" href="#a3d1647eef3e6290674d721e2f6c75832">getSanitizedInput</a>($postData, <span class="stringliteral">&#39;description&#39;</span>);</div>
<div class="line"><span class="lineno">  677</span>        $this-&gt;ticketModel-&gt;updateTicketsDetails($ticket_id, $newTitle, $newDescription);</div>
<div class="line"><span class="lineno">  678</span>        $this-&gt;ticketModel-&gt;logEvent($ticket_id, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  679</span>        header(<span class="stringliteral">&#39;Location: /ticketsApp/config/routes.php/opened&#39;</span>);</div>
<div class="line"><span class="lineno">  680</span>        exit;</div>
<div class="line"><span class="lineno">  681</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentation des données membres</h2>
<a id="ad838cd754f2ab9173a0f0b8f55c0ae0c" name="ad838cd754f2ab9173a0f0b8f55c0ae0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad838cd754f2ab9173a0f0b8f55c0ae0c">&#9670;&#160;</a></span>$ticketModel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TicketController::$ticketModel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_controller_8php_source.html#l00033">33</a> du fichier <a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a>.</p>

</div>
</div>
<hr/>La documentation de cette classe a été générée à partir du fichier suivant :<ul>
<li>app/src/Controllers/<a class="el" href="_ticket_controller_8php_source.html">TicketController.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré par&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
