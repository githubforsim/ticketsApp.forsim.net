<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TicketsApp: Référence de la classe TicketModel</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TicketsApp<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Recherche',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Fonctions membres publiques</a> &#124;
<a href="#pri-attribs">Attributs privés</a> &#124;
<a href="class_ticket_model-members.html">Liste de tous les membres</a>  </div>
  <div class="headertitle"><div class="title">Référence de la classe TicketModel</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Fonctions membres publiques</h2></td></tr>
<tr class="memitem:a13b56d69ca995d4189526b1e8444322b" id="r_a13b56d69ca995d4189526b1e8444322b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a13b56d69ca995d4189526b1e8444322b">__construct</a> (PDO $db)</td></tr>
<tr class="separator:a13b56d69ca995d4189526b1e8444322b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa890b5d5bf8065abf8cdfde313cf331d" id="r_aa890b5d5bf8065abf8cdfde313cf331d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa890b5d5bf8065abf8cdfde313cf331d">logEvent</a> ($ticket_id, $username, $statut_evenement_id)</td></tr>
<tr class="separator:aa890b5d5bf8065abf8cdfde313cf331d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b8b94de7ee885832483476c59bd585e" id="r_a8b8b94de7ee885832483476c59bd585e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b8b94de7ee885832483476c59bd585e">createTicket</a> ($titre, $description, $date_creation, $statut_id, $urgence_id, $username, $produit_id, $type_id, $filesData=null)</td></tr>
<tr class="separator:a8b8b94de7ee885832483476c59bd585e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cb32cfa860dcc6221a01410f97ec5e7" id="r_a0cb32cfa860dcc6221a01410f97ec5e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0cb32cfa860dcc6221a01410f97ec5e7">createTicketSave</a> ($ticketId, $titre, $description, $date_creation, $statut_id, $urgence_id, $username, $produit_id, $type_id)</td></tr>
<tr class="separator:a0cb32cfa860dcc6221a01410f97ec5e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81d5384304182d0291773ac54ef4a78e" id="r_a81d5384304182d0291773ac54ef4a78e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81d5384304182d0291773ac54ef4a78e">addAttachment</a> ($ticketId, $filename)</td></tr>
<tr class="separator:a81d5384304182d0291773ac54ef4a78e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c0f21e67236d8a44e3687ec24da045" id="r_aa1c0f21e67236d8a44e3687ec24da045"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1c0f21e67236d8a44e3687ec24da045">getUserEventHistory</a> ($produit_id, $username)</td></tr>
<tr class="separator:aa1c0f21e67236d8a44e3687ec24da045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e4b01092bb8a212a3eb3afe8f0d7c5" id="r_a96e4b01092bb8a212a3eb3afe8f0d7c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96e4b01092bb8a212a3eb3afe8f0d7c5">getTicketEventHistory</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a96e4b01092bb8a212a3eb3afe8f0d7c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85e0e1f82a4053f9137bbdd7db84215" id="r_af85e0e1f82a4053f9137bbdd7db84215"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af85e0e1f82a4053f9137bbdd7db84215">getOpenTicket</a> ($produit_id, $username)</td></tr>
<tr class="separator:af85e0e1f82a4053f9137bbdd7db84215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b39e59fa6fce2bc4b24ecad1fc80fa2" id="r_a1b39e59fa6fce2bc4b24ecad1fc80fa2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b39e59fa6fce2bc4b24ecad1fc80fa2">getUrgence</a> ()</td></tr>
<tr class="separator:a1b39e59fa6fce2bc4b24ecad1fc80fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673e054af50370d655860de368d4efdb" id="r_a673e054af50370d655860de368d4efdb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a673e054af50370d655860de368d4efdb">getProduit</a> ()</td></tr>
<tr class="separator:a673e054af50370d655860de368d4efdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc43c9c2b568234536e09fd190967e47" id="r_adc43c9c2b568234536e09fd190967e47"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc43c9c2b568234536e09fd190967e47">getType</a> ()</td></tr>
<tr class="separator:adc43c9c2b568234536e09fd190967e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9a0c42a1b9f7817892202f09a28ac9" id="r_a3a9a0c42a1b9f7817892202f09a28ac9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a9a0c42a1b9f7817892202f09a28ac9">getSolvedTicket</a> ($produit_id, $username)</td></tr>
<tr class="separator:a3a9a0c42a1b9f7817892202f09a28ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d1607fa99638511e9d16e7fd4f1cf2b" id="r_a1d1607fa99638511e9d16e7fd4f1cf2b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d1607fa99638511e9d16e7fd4f1cf2b">getClosedTicket</a> ($produit_id, $username)</td></tr>
<tr class="separator:a1d1607fa99638511e9d16e7fd4f1cf2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa31424ce9b8bf37519a4764eb5f419a" id="r_afa31424ce9b8bf37519a4764eb5f419a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa31424ce9b8bf37519a4764eb5f419a">getTicketDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:afa31424ce9b8bf37519a4764eb5f419a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438351d16af56bfd0eeb3f3478f4edcb" id="r_a438351d16af56bfd0eeb3f3478f4edcb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a438351d16af56bfd0eeb3f3478f4edcb">getTicketSaveDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a438351d16af56bfd0eeb3f3478f4edcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427fe08044a2eb7ce35d007997fb8c82" id="r_a427fe08044a2eb7ce35d007997fb8c82"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a427fe08044a2eb7ce35d007997fb8c82">getClosedDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a427fe08044a2eb7ce35d007997fb8c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e2dbe6d938e4bd1eaeebdece43e196" id="r_a35e2dbe6d938e4bd1eaeebdece43e196"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35e2dbe6d938e4bd1eaeebdece43e196">getSolvedDetails</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a35e2dbe6d938e4bd1eaeebdece43e196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6e92e827242620d3872e650a9d29e0" id="r_a7d6e92e827242620d3872e650a9d29e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d6e92e827242620d3872e650a9d29e0">setOpen</a> ($ticket_id)</td></tr>
<tr class="separator:a7d6e92e827242620d3872e650a9d29e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a436b099317a53abdc6a61bd8bd6926a3" id="r_a436b099317a53abdc6a61bd8bd6926a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a436b099317a53abdc6a61bd8bd6926a3">setClose</a> ($ticket_id)</td></tr>
<tr class="separator:a436b099317a53abdc6a61bd8bd6926a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a1aa6f035f2ac3ab62031f336cc1ad" id="r_a60a1aa6f035f2ac3ab62031f336cc1ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a60a1aa6f035f2ac3ab62031f336cc1ad">setSolve</a> ($ticket_id)</td></tr>
<tr class="separator:a60a1aa6f035f2ac3ab62031f336cc1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc1e0e5613760521633e91a744ea5ca2" id="r_abc1e0e5613760521633e91a744ea5ca2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc1e0e5613760521633e91a744ea5ca2">getAttachmentsTicket</a> ($ticket_id)</td></tr>
<tr class="separator:abc1e0e5613760521633e91a744ea5ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19fcc708fe69ef742f89a7121b5300d" id="r_ac19fcc708fe69ef742f89a7121b5300d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac19fcc708fe69ef742f89a7121b5300d">getAttachment</a> ($attachmentId)</td></tr>
<tr class="separator:ac19fcc708fe69ef742f89a7121b5300d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256006eaa887212381bcfd9dad92002a" id="r_a256006eaa887212381bcfd9dad92002a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a256006eaa887212381bcfd9dad92002a">deleteAttachment</a> ($attachmentId)</td></tr>
<tr class="separator:a256006eaa887212381bcfd9dad92002a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a335a06e4449c6904bddf13ed87297a" id="r_a2a335a06e4449c6904bddf13ed87297a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a335a06e4449c6904bddf13ed87297a">updateTicketsDetails</a> ($ticket_id, $newTitle, $newDescription)</td></tr>
<tr class="separator:a2a335a06e4449c6904bddf13ed87297a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5812c2b2d6648ef2b638e1f0753930" id="r_a9b5812c2b2d6648ef2b638e1f0753930"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b5812c2b2d6648ef2b638e1f0753930">getAllTicketMessages</a> ($ticket_id, $username)</td></tr>
<tr class="separator:a9b5812c2b2d6648ef2b638e1f0753930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58fd7d03ab34f8325b0178ea98caf014" id="r_a58fd7d03ab34f8325b0178ea98caf014"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58fd7d03ab34f8325b0178ea98caf014">sendMessage</a> ($ticket_id, $message, $username)</td></tr>
<tr class="separator:a58fd7d03ab34f8325b0178ea98caf014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77512eadd5c4a9581d4800459f1c4e80" id="r_a77512eadd5c4a9581d4800459f1c4e80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77512eadd5c4a9581d4800459f1c4e80">getProduitsByUser</a> ($username)</td></tr>
<tr class="separator:a77512eadd5c4a9581d4800459f1c4e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad51fab568370a70c84fc45fdd5d0019" id="r_aad51fab568370a70c84fc45fdd5d0019"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad51fab568370a70c84fc45fdd5d0019">getFirstProduitByUser</a> ($username)</td></tr>
<tr class="separator:aad51fab568370a70c84fc45fdd5d0019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2035c61e8b0aaaddadc613179e0c7460" id="r_a2035c61e8b0aaaddadc613179e0c7460"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2035c61e8b0aaaddadc613179e0c7460">getUserMail</a> ($username)</td></tr>
<tr class="separator:a2035c61e8b0aaaddadc613179e0c7460"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Attributs privés</h2></td></tr>
<tr class="memitem:a59ef6b9cfddef4424f3aab8615b173ea" id="r_a59ef6b9cfddef4424f3aab8615b173ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a59ef6b9cfddef4424f3aab8615b173ea">$db</a></td></tr>
<tr class="memdesc:a59ef6b9cfddef4424f3aab8615b173ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instance de PDO pour la connexion à la base de données.  <br /></td></tr>
<tr class="separator:a59ef6b9cfddef4424f3aab8615b173ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description détaillée</h2>
<div class="textblock">
<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00007">7</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
</div><h2 class="groupheader">Documentation des constructeurs et destructeur</h2>
<a id="a13b56d69ca995d4189526b1e8444322b" name="a13b56d69ca995d4189526b1e8444322b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13b56d69ca995d4189526b1e8444322b">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::__construct </td>
          <td>(</td>
          <td class="paramtype">PDO</td>          <td class="paramname"><span class="paramname"><em>$db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00015">15</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>    {</div>
<div class="line"><span class="lineno">   17</span>        $this-&gt;db = <a class="code hl_variable" href="#a59ef6b9cfddef4424f3aab8615b173ea">$db</a>;</div>
<div class="line"><span class="lineno">   18</span>    }</div>
<div class="ttc" id="aclass_ticket_model_html_a59ef6b9cfddef4424f3aab8615b173ea"><div class="ttname"><a href="#a59ef6b9cfddef4424f3aab8615b173ea">TicketModel\$db</a></div><div class="ttdeci">$db</div><div class="ttdoc">Instance de PDO pour la connexion à la base de données.</div><div class="ttdef"><b>Definition</b> <a href="_ticket_model_8php_source.html#l00009">TicketModel.php:9</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentation des fonctions membres</h2>
<a id="a81d5384304182d0291773ac54ef4a78e" name="a81d5384304182d0291773ac54ef4a78e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81d5384304182d0291773ac54ef4a78e">&#9670;&#160;</a></span>addAttachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::addAttachment </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticketId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filename</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00152">152</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  153</span>    {</div>
<div class="line"><span class="lineno">  154</span>        $query = <span class="stringliteral">&quot;INSERT INTO attachments (ticket_id, filename) VALUES (:ticket_id, :filename)&quot;</span>;</div>
<div class="line"><span class="lineno">  155</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  156</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticketId);</div>
<div class="line"><span class="lineno">  157</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:filename&#39;</span>, $filename);</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        <span class="comment">// Vérification si l&#39;exécution est réussite sinon erreur</span></div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">if</span> ($statement-&gt;execute()) {</div>
<div class="line"><span class="lineno">  161</span>            <span class="comment">// Créer un événement pour l&#39;ajout de la pièce jointe</span></div>
<div class="line"><span class="lineno">  162</span>            $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  163</span>            $statut_evenement_id = 5; <span class="comment">// 5 = Attachment added</span></div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  166</span>                $this-&gt;<a class="code hl_function" href="#aa890b5d5bf8065abf8cdfde313cf331d">logEvent</a>($ticketId, $username, $statut_evenement_id);</div>
<div class="line"><span class="lineno">  167</span>            } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line"><span class="lineno">  168</span>                <span class="comment">// Gérer l&#39;exception selon les besoins</span></div>
<div class="line"><span class="lineno">  169</span>                error_log(<span class="stringliteral">&quot;Failed to log event: &quot;</span> . $e-&gt;getMessage());</div>
<div class="line"><span class="lineno">  170</span>            }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  173</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  174</span>            error_log(<span class="stringliteral">&quot;Failed to execute SQL query: &quot;</span> . $query);</div>
<div class="line"><span class="lineno">  175</span>            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Failed to add attachment to the database.&#39;</span>);</div>
<div class="line"><span class="lineno">  176</span>        }</div>
<div class="line"><span class="lineno">  177</span>    }</div>
<div class="ttc" id="aclass_ticket_model_html_aa890b5d5bf8065abf8cdfde313cf331d"><div class="ttname"><a href="#aa890b5d5bf8065abf8cdfde313cf331d">TicketModel\logEvent</a></div><div class="ttdeci">logEvent($ticket_id, $username, $statut_evenement_id)</div><div class="ttdef"><b>Definition</b> <a href="_ticket_model_8php_source.html#l00028">TicketModel.php:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b8b94de7ee885832483476c59bd585e" name="a8b8b94de7ee885832483476c59bd585e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b8b94de7ee885832483476c59bd585e">&#9670;&#160;</a></span>createTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::createTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$titre</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$description</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$date_creation</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$statut_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$urgence_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$type_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filesData</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00079">79</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   80</span>    {</div>
<div class="line"><span class="lineno">   81</span>        date_default_timezone_set(<span class="stringliteral">&#39;Europe/Paris&#39;</span>);</div>
<div class="line"><span class="lineno">   82</span>        <span class="comment">// Utiliser la date et l&#39;heure actuelles</span></div>
<div class="line"><span class="lineno">   83</span>        $date_creation = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>); </div>
<div class="line"><span class="lineno">   84</span>        </div>
<div class="line"><span class="lineno">   85</span>        $query = <span class="stringliteral">&quot;INSERT INTO ticket (titre, description, date_creation, statut_id, urgence_id, username, produit_id, type_id) </span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">        VALUES (:titre, :description, :date_creation, :statut_id, :urgence_id, :username, :produit_id, :type_id)&quot;</span>;</div>
<div class="line"><span class="lineno">   87</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">   88</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:titre&#39;</span>, $titre);</div>
<div class="line"><span class="lineno">   89</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:description&#39;</span>, $description);</div>
<div class="line"><span class="lineno">   90</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:date_creation&#39;</span>, $date_creation);</div>
<div class="line"><span class="lineno">   91</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:statut_id&#39;</span>, $statut_id);</div>
<div class="line"><span class="lineno">   92</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:urgence_id&#39;</span>, $urgence_id);</div>
<div class="line"><span class="lineno">   93</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:username&#39;</span>, $username);</div>
<div class="line"><span class="lineno">   94</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:produit_id&#39;</span>, $produit_id);</div>
<div class="line"><span class="lineno">   95</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:type_id&#39;</span>, $type_id);</div>
<div class="line"><span class="lineno">   96</span>        </div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">if</span> ($statement-&gt;execute()) {</div>
<div class="line"><span class="lineno">   98</span>            $ticketId = $this-&gt;db-&gt;lastInsertId();</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>            <span class="comment">// Sauvegarde des pièces jointes si elles existent</span></div>
<div class="line"><span class="lineno">  101</span>            <span class="keywordflow">if</span> ($filesData) {</div>
<div class="line"><span class="lineno">  102</span>                $this-&gt;createAttachments($ticketId, $filesData, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  103</span>            }</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>            <span class="comment">// Appel de la fonction createTicketSave pour sauvegarder le ticket dans ticket_save</span></div>
<div class="line"><span class="lineno">  106</span>            $this-&gt;<a class="code hl_function" href="#a0cb32cfa860dcc6221a01410f97ec5e7">createTicketSave</a>($ticketId, $titre, $description, $date_creation, $statut_id, $urgence_id, $username, $produit_id, $type_id);</div>
<div class="line"><span class="lineno">  107</span>            </div>
<div class="line"><span class="lineno">  108</span>            <span class="comment">// Renvoi de l&#39;ID du ticket créé</span></div>
<div class="line"><span class="lineno">  109</span>            <span class="keywordflow">return</span> $ticketId;</div>
<div class="line"><span class="lineno">  110</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Si échec renvoi false</span></div>
<div class="line"><span class="lineno">  112</span>        }</div>
<div class="line"><span class="lineno">  113</span>    }</div>
<div class="ttc" id="aclass_ticket_model_html_a0cb32cfa860dcc6221a01410f97ec5e7"><div class="ttname"><a href="#a0cb32cfa860dcc6221a01410f97ec5e7">TicketModel\createTicketSave</a></div><div class="ttdeci">createTicketSave($ticketId, $titre, $description, $date_creation, $statut_id, $urgence_id, $username, $produit_id, $type_id)</div><div class="ttdef"><b>Definition</b> <a href="_ticket_model_8php_source.html#l00128">TicketModel.php:128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0cb32cfa860dcc6221a01410f97ec5e7" name="a0cb32cfa860dcc6221a01410f97ec5e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cb32cfa860dcc6221a01410f97ec5e7">&#9670;&#160;</a></span>createTicketSave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::createTicketSave </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticketId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$titre</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$description</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$date_creation</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$statut_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$urgence_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$type_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00128">128</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  129</span>    {</div>
<div class="line"><span class="lineno">  130</span>        $query = <span class="stringliteral">&quot;INSERT INTO ticket_save (ticket_id, titre, description, date_creation, statut_id, urgence_id, username, produit_id, type_id) </span></div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">                VALUES (:ticket_id, :titre, :description, :date_creation, :statut_id, :urgence_id, :username, :produit_id, :type_id)&quot;</span>;</div>
<div class="line"><span class="lineno">  132</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  133</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticketId);</div>
<div class="line"><span class="lineno">  134</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:titre&#39;</span>, $titre);</div>
<div class="line"><span class="lineno">  135</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:description&#39;</span>, $description);</div>
<div class="line"><span class="lineno">  136</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:date_creation&#39;</span>, $date_creation);</div>
<div class="line"><span class="lineno">  137</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:statut_id&#39;</span>, $statut_id);</div>
<div class="line"><span class="lineno">  138</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:urgence_id&#39;</span>, $urgence_id);</div>
<div class="line"><span class="lineno">  139</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:username&#39;</span>, $username);</div>
<div class="line"><span class="lineno">  140</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:produit_id&#39;</span>, $produit_id);</div>
<div class="line"><span class="lineno">  141</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:type_id&#39;</span>, $type_id);</div>
<div class="line"><span class="lineno">  142</span>        $statement-&gt;execute();</div>
<div class="line"><span class="lineno">  143</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a256006eaa887212381bcfd9dad92002a" name="a256006eaa887212381bcfd9dad92002a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256006eaa887212381bcfd9dad92002a">&#9670;&#160;</a></span>deleteAttachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::deleteAttachment </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$attachmentId</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00595">595</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  596</span>    {</div>
<div class="line"><span class="lineno">  597</span>        $query = <span class="stringliteral">&quot;DELETE FROM attachments WHERE attachment_id=:attachment_id&quot;</span>;</div>
<div class="line"><span class="lineno">  598</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  599</span>        $result = $stmt-&gt;bindValue(<span class="stringliteral">&#39;:attachment_id&#39;</span>, $attachmentId);</div>
<div class="line"><span class="lineno">  600</span>        $stmt-&gt;execute();        </div>
<div class="line"><span class="lineno">  601</span>        <span class="keywordflow">if</span> (!$result) {</div>
<div class="line"><span class="lineno">  602</span>            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;There was an error deleting the attachment.&#39;</span>);</div>
<div class="line"><span class="lineno">  603</span>        }</div>
<div class="line"><span class="lineno">  604</span>        </div>
<div class="line"><span class="lineno">  605</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  606</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b5812c2b2d6648ef2b638e1f0753930" name="a9b5812c2b2d6648ef2b638e1f0753930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5812c2b2d6648ef2b638e1f0753930">&#9670;&#160;</a></span>getAllTicketMessages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getAllTicketMessages </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00668">668</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  668</span>                                                                {</div>
<div class="line"><span class="lineno">  669</span>        $query = $this-&gt;db-&gt;prepare(<span class="stringliteral">&#39;</span></div>
<div class="line"><span class="lineno">  670</span><span class="stringliteral">            SELECT message_sent, message_sender, message_receiver, date_sent </span></div>
<div class="line"><span class="lineno">  671</span><span class="stringliteral">            FROM chat_messages </span></div>
<div class="line"><span class="lineno">  672</span><span class="stringliteral">            WHERE ticket_id = :ticket_id AND (message_sender = :username OR message_receiver = :username)</span></div>
<div class="line"><span class="lineno">  673</span><span class="stringliteral">            ORDER BY date_sent ASC</span></div>
<div class="line"><span class="lineno">  674</span><span class="stringliteral">        &#39;</span>);</div>
<div class="line"><span class="lineno">  675</span>        $query-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticket_id, PDO::PARAM_INT);</div>
<div class="line"><span class="lineno">  676</span>        $query-&gt;bindValue(<span class="stringliteral">&#39;:username&#39;</span>, $username, PDO::PARAM_STR);</div>
<div class="line"><span class="lineno">  677</span>        $query-&gt;execute();</div>
<div class="line"><span class="lineno">  678</span>    </div>
<div class="line"><span class="lineno">  679</span>        <span class="keywordflow">return</span> $query-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  680</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac19fcc708fe69ef742f89a7121b5300d" name="ac19fcc708fe69ef742f89a7121b5300d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac19fcc708fe69ef742f89a7121b5300d">&#9670;&#160;</a></span>getAttachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getAttachment </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$attachmentId</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00581">581</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  582</span>    {</div>
<div class="line"><span class="lineno">  583</span>        $query = <span class="stringliteral">&quot;SELECT * FROM attachments WHERE attachment_id=:attachment_id&quot;</span>;</div>
<div class="line"><span class="lineno">  584</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  585</span>        $stmt-&gt;bindValue(<span class="stringliteral">&#39;:attachment_id&#39;</span>, $attachmentId);</div>
<div class="line"><span class="lineno">  586</span>        $stmt-&gt;execute();</div>
<div class="line"><span class="lineno">  587</span>        <span class="keywordflow">return</span> $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  588</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="abc1e0e5613760521633e91a744ea5ca2" name="abc1e0e5613760521633e91a744ea5ca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc1e0e5613760521633e91a744ea5ca2">&#9670;&#160;</a></span>getAttachmentsTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getAttachmentsTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00567">567</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  568</span>    {</div>
<div class="line"><span class="lineno">  569</span>        $query = <span class="stringliteral">&quot;SELECT * FROM attachments WHERE ticket_id=:ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  570</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  571</span>        $stmt-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticket_id);</div>
<div class="line"><span class="lineno">  572</span>        $stmt-&gt;execute();</div>
<div class="line"><span class="lineno">  573</span>        <span class="keywordflow">return</span> $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  574</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a427fe08044a2eb7ce35d007997fb8c82" name="a427fe08044a2eb7ce35d007997fb8c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a427fe08044a2eb7ce35d007997fb8c82">&#9670;&#160;</a></span>getClosedDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getClosedDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00387">387</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  388</span>    {</div>
<div class="line"><span class="lineno">  389</span>        $query = <span class="stringliteral">&quot;SELECT t.ticket_id, t.titre, t.description, DATE_FORMAT(t.date_creation, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_creation, s.valeur, p.nom_produit, ty.nom_type, u.niveau, us.username FROM ticket t</span></div>
<div class="line"><span class="lineno">  390</span><span class="stringliteral">        INNER JOIN statut s ON s.statut_id = t.statut_id</span></div>
<div class="line"><span class="lineno">  391</span><span class="stringliteral">        INNER JOIN urgence u ON u.urgence_id = t.urgence_id</span></div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral">        INNER JOIN user us ON us.username = t.username</span></div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral">        INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral">        INNER JOIN type ty ON ty.type_id = t.type_id</span></div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">        WHERE s.statut_id = 3 AND t.ticket_id = :ticket_id AND us.username = :username&quot;</span>;</div>
<div class="line"><span class="lineno">  396</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  397</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id, <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  398</span>        $result = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  399</span>        <span class="keywordflow">return</span> $result;</div>
<div class="line"><span class="lineno">  400</span>     }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d1607fa99638511e9d16e7fd4f1cf2b" name="a1d1607fa99638511e9d16e7fd4f1cf2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d1607fa99638511e9d16e7fd4f1cf2b">&#9670;&#160;</a></span>getClosedTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getClosedTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00312">312</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  313</span>    {</div>
<div class="line"><span class="lineno">  314</span>        $query = <span class="stringliteral">&quot;SELECT t.ticket_id, t.titre, DATE_FORMAT(t.date_creation, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_creation, s.valeur, p.nom_produit, ty.nom_type, u.niveau, us.username FROM ticket t</span></div>
<div class="line"><span class="lineno">  315</span><span class="stringliteral">        INNER JOIN statut s ON s.statut_id = t.statut_id</span></div>
<div class="line"><span class="lineno">  316</span><span class="stringliteral">        INNER JOIN urgence u ON u.urgence_id = t.urgence_id</span></div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral">        INNER JOIN user us ON us.username = t.username</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">        INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">        INNER JOIN type ty ON ty.type_id = t.type_id</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">        WHERE s.statut_id = 3 AND  p.produit_id = :produit_id AND us.username = :username</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">        ORDER BY t.ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  322</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  323</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:produit_id&#39;</span> =&gt; $produit_id, <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  324</span>        <span class="keywordflow">return</span> $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  325</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aad51fab568370a70c84fc45fdd5d0019" name="aad51fab568370a70c84fc45fdd5d0019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad51fab568370a70c84fc45fdd5d0019">&#9670;&#160;</a></span>getFirstProduitByUser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getFirstProduitByUser </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00736">736</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  737</span>    {</div>
<div class="line"><span class="lineno">  738</span>        $query = <span class="stringliteral">&quot;SELECT p.* </span></div>
<div class="line"><span class="lineno">  739</span><span class="stringliteral">                FROM produit p </span></div>
<div class="line"><span class="lineno">  740</span><span class="stringliteral">                INNER JOIN user_produit up ON p.produit_id = up.produit_id </span></div>
<div class="line"><span class="lineno">  741</span><span class="stringliteral">                WHERE up.username = :username </span></div>
<div class="line"><span class="lineno">  742</span><span class="stringliteral">                ORDER BY p.produit_id ASC </span></div>
<div class="line"><span class="lineno">  743</span><span class="stringliteral">                LIMIT 1&quot;</span>;</div>
<div class="line"><span class="lineno">  744</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  745</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  746</span>        <span class="keywordflow">return</span> $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  747</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af85e0e1f82a4053f9137bbdd7db84215" name="af85e0e1f82a4053f9137bbdd7db84215"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85e0e1f82a4053f9137bbdd7db84215">&#9670;&#160;</a></span>getOpenTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getOpenTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00230">230</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  231</span>    {</div>
<div class="line"><span class="lineno">  232</span>        $query = <span class="stringliteral">&quot;SELECT t.ticket_id, t.titre, DATE_FORMAT(t.date_creation, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_creation, s.valeur, p.nom_produit, ty.nom_type, u.niveau, us.username FROM ticket t</span></div>
<div class="line"><span class="lineno">  233</span><span class="stringliteral">        INNER JOIN statut s ON s.statut_id = t.statut_id</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">        INNER JOIN urgence u ON u.urgence_id = t.urgence_id</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">        INNER JOIN user us ON us.username = t.username</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">        INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">        INNER JOIN type ty ON ty.type_id = t.type_id</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">        WHERE s.statut_id = 1 AND  p.produit_id = :produit_id AND us.username = :username</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">        ORDER BY t.ticket_id&quot;</span>;                ;</div>
<div class="line"><span class="lineno">  240</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  241</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:produit_id&#39;</span> =&gt; $produit_id, <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  242</span>        <span class="keywordflow">return</span> $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  243</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a673e054af50370d655860de368d4efdb" name="a673e054af50370d655860de368d4efdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673e054af50370d655860de368d4efdb">&#9670;&#160;</a></span>getProduit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getProduit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00262">262</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  263</span>    {</div>
<div class="line"><span class="lineno">  264</span>        $query = <span class="stringliteral">&quot;SELECT * FROM produit&quot;</span>;</div>
<div class="line"><span class="lineno">  265</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  266</span>        $statement-&gt;execute();</div>
<div class="line"><span class="lineno">  267</span>        $tickets = $statement-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">return</span> $tickets;</div>
<div class="line"><span class="lineno">  269</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a77512eadd5c4a9581d4800459f1c4e80" name="a77512eadd5c4a9581d4800459f1c4e80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77512eadd5c4a9581d4800459f1c4e80">&#9670;&#160;</a></span>getProduitsByUser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getProduitsByUser </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00728">728</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  729</span>    {</div>
<div class="line"><span class="lineno">  730</span>        $query = <span class="stringliteral">&quot;SELECT p.* FROM produit p INNER JOIN user_produit up ON p.produit_id = up.produit_id WHERE up.username = :username&quot;</span>;</div>
<div class="line"><span class="lineno">  731</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  732</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  733</span>        <span class="keywordflow">return</span> $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  734</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a35e2dbe6d938e4bd1eaeebdece43e196" name="a35e2dbe6d938e4bd1eaeebdece43e196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35e2dbe6d938e4bd1eaeebdece43e196">&#9670;&#160;</a></span>getSolvedDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getSolvedDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00408">408</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  409</span>    {</div>
<div class="line"><span class="lineno">  410</span>        $query = <span class="stringliteral">&quot;SELECT t.ticket_id, t.titre, t.description, DATE_FORMAT(t.date_creation, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_creation, s.valeur, p.nom_produit, ty.nom_type, u.niveau, us.username FROM ticket t</span></div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">        INNER JOIN statut s ON s.statut_id = t.statut_id</span></div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral">        INNER JOIN urgence u ON u.urgence_id = t.urgence_id</span></div>
<div class="line"><span class="lineno">  413</span><span class="stringliteral">        INNER JOIN user us ON us.username = t.username</span></div>
<div class="line"><span class="lineno">  414</span><span class="stringliteral">        INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  415</span><span class="stringliteral">        INNER JOIN type ty ON ty.type_id = t.type_id</span></div>
<div class="line"><span class="lineno">  416</span><span class="stringliteral">        WHERE s.statut_id = 2 AND t.ticket_id = :ticket_id AND us.username = :username&quot;</span>;</div>
<div class="line"><span class="lineno">  417</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  418</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id, <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  419</span>        $result = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordflow">return</span> $result;</div>
<div class="line"><span class="lineno">  421</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a9a0c42a1b9f7817892202f09a28ac9" name="a3a9a0c42a1b9f7817892202f09a28ac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a9a0c42a1b9f7817892202f09a28ac9">&#9670;&#160;</a></span>getSolvedTicket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getSolvedTicket </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00291">291</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  292</span>    {</div>
<div class="line"><span class="lineno">  293</span>        $query = <span class="stringliteral">&quot;SELECT t.ticket_id, t.titre, DATE_FORMAT(t.date_creation, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_creation, s.valeur, p.nom_produit, ty.nom_type, u.niveau, us.username FROM ticket t</span></div>
<div class="line"><span class="lineno">  294</span><span class="stringliteral">        INNER JOIN statut s ON s.statut_id = t.statut_id</span></div>
<div class="line"><span class="lineno">  295</span><span class="stringliteral">        INNER JOIN urgence u ON u.urgence_id = t.urgence_id</span></div>
<div class="line"><span class="lineno">  296</span><span class="stringliteral">        INNER JOIN user us ON us.username = t.username</span></div>
<div class="line"><span class="lineno">  297</span><span class="stringliteral">        INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  298</span><span class="stringliteral">        INNER JOIN type ty ON ty.type_id = t.type_id</span></div>
<div class="line"><span class="lineno">  299</span><span class="stringliteral">        WHERE s.statut_id = 2 AND  p.produit_id = :produit_id AND us.username = :username</span></div>
<div class="line"><span class="lineno">  300</span><span class="stringliteral">        ORDER BY t.ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  301</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  302</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:produit_id&#39;</span> =&gt; $produit_id, <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  303</span>        <span class="keywordflow">return</span> $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  304</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="afa31424ce9b8bf37519a4764eb5f419a" name="afa31424ce9b8bf37519a4764eb5f419a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa31424ce9b8bf37519a4764eb5f419a">&#9670;&#160;</a></span>getTicketDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getTicketDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00333">333</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  334</span>    {</div>
<div class="line"><span class="lineno">  335</span>        $query = <span class="stringliteral">&quot;SELECT t.ticket_id, t.titre, t.description, DATE_FORMAT(t.date_creation, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_creation, s.valeur, p.nom_produit, ty.nom_type, u.niveau, us.username FROM ticket t</span></div>
<div class="line"><span class="lineno">  336</span><span class="stringliteral">        INNER JOIN statut s ON s.statut_id = t.statut_id</span></div>
<div class="line"><span class="lineno">  337</span><span class="stringliteral">        INNER JOIN urgence u ON u.urgence_id = t.urgence_id</span></div>
<div class="line"><span class="lineno">  338</span><span class="stringliteral">        INNER JOIN user us ON us.username = t.username</span></div>
<div class="line"><span class="lineno">  339</span><span class="stringliteral">        INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral">        INNER JOIN type ty ON ty.type_id = t.type_id</span></div>
<div class="line"><span class="lineno">  341</span><span class="stringliteral">        WHERE s.statut_id = 1 AND t.ticket_id = :ticket_id AND us.username = :username&quot;</span>;</div>
<div class="line"><span class="lineno">  342</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  343</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id, <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  344</span>        $result = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  345</span>        <span class="keywordflow">return</span> $result;</div>
<div class="line"><span class="lineno">  346</span>     }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a96e4b01092bb8a212a3eb3afe8f0d7c5" name="a96e4b01092bb8a212a3eb3afe8f0d7c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96e4b01092bb8a212a3eb3afe8f0d7c5">&#9670;&#160;</a></span>getTicketEventHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getTicketEventHistory </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00206">206</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  207</span>    {</div>
<div class="line"><span class="lineno">  208</span>        $query = <span class="stringliteral">&quot;SELECT e.evenement_id, e.ticket_id, DATE_FORMAT(e.date_evenement, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_evenement, e.username, se.event_type, e.titre, p.nom_produit, e.description, t.statut_id </span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">                FROM evenement e</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral">                INNER JOIN statut_evenement se ON e.statut_evenement_id = se.statut_evenement_id</span></div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral">                INNER JOIN ticket t ON e.ticket_id = t.ticket_id</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral">                INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">                WHERE e.ticket_id = :ticket_id AND t.username = :username</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">                ORDER BY e.date_evenement DESC&quot;</span>;</div>
<div class="line"><span class="lineno">  215</span>        </div>
<div class="line"><span class="lineno">  216</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  217</span>        $stmt-&gt;execute([</div>
<div class="line"><span class="lineno">  218</span>            <span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id,</div>
<div class="line"><span class="lineno">  219</span>            <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username</div>
<div class="line"><span class="lineno">  220</span>        ]);</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">return</span> $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  222</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a438351d16af56bfd0eeb3f3478f4edcb" name="a438351d16af56bfd0eeb3f3478f4edcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a438351d16af56bfd0eeb3f3478f4edcb">&#9670;&#160;</a></span>getTicketSaveDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getTicketSaveDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00354">354</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  355</span>    {</div>
<div class="line"><span class="lineno">  356</span>        $query = <span class="stringliteral">&quot;SELECT t.ticket_id, t.titre, t.description, DATE_FORMAT(t.date_creation, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_creation, </span></div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral">                s.valeur, p.nom_produit, ty.nom_type, u.niveau, us.username</span></div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral">            FROM ticket_save t</span></div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral">            INNER JOIN statut s ON s.statut_id = t.statut_id</span></div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">            INNER JOIN urgence u ON u.urgence_id = t.urgence_id</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">            INNER JOIN user us ON us.username = t.username</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">            INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">            INNER JOIN type ty ON ty.type_id = t.type_id</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">            WHERE t.ticket_save_id = (</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">                SELECT MAX(t2.ticket_save_id)</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">                FROM ticket_save t2</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">                WHERE t2.ticket_id = t.ticket_id</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">                AND t2.ticket_save_id &lt; (</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">                    SELECT MAX(t3.ticket_save_id)</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">                    FROM ticket_save t3</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">                    WHERE t3.ticket_id = t.ticket_id</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral">                )</span></div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">            ) AND t.ticket_id = :ticket_id;</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">              AND us.username = :username&quot;</span>;</div>
<div class="line"><span class="lineno">  375</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  376</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id, <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  377</span>        $result = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  378</span>        <span class="keywordflow">return</span> $result ?: []; <span class="comment">// Retourne un tableau vide si aucun résultat</span></div>
<div class="line"><span class="lineno">  379</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="adc43c9c2b568234536e09fd190967e47" name="adc43c9c2b568234536e09fd190967e47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc43c9c2b568234536e09fd190967e47">&#9670;&#160;</a></span>getType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getType </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00275">275</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  276</span>    {</div>
<div class="line"><span class="lineno">  277</span>        $query = <span class="stringliteral">&quot;SELECT * FROM type&quot;</span>;</div>
<div class="line"><span class="lineno">  278</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  279</span>        $statement-&gt;execute();</div>
<div class="line"><span class="lineno">  280</span>        $tickets = $statement-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  281</span>        <span class="comment">//var_dump($tickets);</span></div>
<div class="line"><span class="lineno">  282</span>        <span class="keywordflow">return</span> $tickets;</div>
<div class="line"><span class="lineno">  283</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b39e59fa6fce2bc4b24ecad1fc80fa2" name="a1b39e59fa6fce2bc4b24ecad1fc80fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b39e59fa6fce2bc4b24ecad1fc80fa2">&#9670;&#160;</a></span>getUrgence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getUrgence </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00249">249</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  250</span>    {</div>
<div class="line"><span class="lineno">  251</span>        $query = <span class="stringliteral">&quot;SELECT * FROM urgence&quot;</span>;</div>
<div class="line"><span class="lineno">  252</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  253</span>        $statement-&gt;execute();</div>
<div class="line"><span class="lineno">  254</span>        $tickets = $statement-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  255</span>        <span class="keywordflow">return</span> $tickets;</div>
<div class="line"><span class="lineno">  256</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1c0f21e67236d8a44e3687ec24da045" name="aa1c0f21e67236d8a44e3687ec24da045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1c0f21e67236d8a44e3687ec24da045">&#9670;&#160;</a></span>getUserEventHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getUserEventHistory </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$produit_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00185">185</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  186</span>    {</div>
<div class="line"><span class="lineno">  187</span>        $query = <span class="stringliteral">&quot;SELECT e.evenement_id, e.ticket_id, DATE_FORMAT(e.date_evenement, &#39;%d/%m/%Y %H:%i:%s&#39;) as date_evenement, e.username, se.event_type, e.titre, p.nom_produit, e.description, t.statut_id </span></div>
<div class="line"><span class="lineno">  188</span><span class="stringliteral">                FROM evenement e</span></div>
<div class="line"><span class="lineno">  189</span><span class="stringliteral">                INNER JOIN statut_evenement se ON e.statut_evenement_id = se.statut_evenement_id</span></div>
<div class="line"><span class="lineno">  190</span><span class="stringliteral">                INNER JOIN ticket t ON e.ticket_id = t.ticket_id</span></div>
<div class="line"><span class="lineno">  191</span><span class="stringliteral">                INNER JOIN produit p ON p.produit_id = t.produit_id</span></div>
<div class="line"><span class="lineno">  192</span><span class="stringliteral">                WHERE p.produit_id = :produit_id AND t.username = :username</span></div>
<div class="line"><span class="lineno">  193</span><span class="stringliteral">                ORDER BY e.date_evenement DESC&quot;</span>;</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  196</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:produit_id&#39;</span> =&gt; $produit_id, <span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">return</span> $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  198</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2035c61e8b0aaaddadc613179e0c7460" name="a2035c61e8b0aaaddadc613179e0c7460"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2035c61e8b0aaaddadc613179e0c7460">&#9670;&#160;</a></span>getUserMail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::getUserMail </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00754">754</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  755</span>    {</div>
<div class="line"><span class="lineno">  756</span>        $query = <span class="stringliteral">&quot;SELECT mail FROM user WHERE username = :username&quot;</span>;</div>
<div class="line"><span class="lineno">  757</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  758</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:username&#39;</span> =&gt; $username]);</div>
<div class="line"><span class="lineno">  759</span>        $userData = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  760</span>        </div>
<div class="line"><span class="lineno">  761</span>        <span class="keywordflow">if</span> ($userData &amp;&amp; isset($userData[<span class="stringliteral">&#39;mail&#39;</span>])) {</div>
<div class="line"><span class="lineno">  762</span>            <span class="keywordflow">return</span> $userData[<span class="stringliteral">&#39;mail&#39;</span>]; <span class="comment">//Récupération du mail en chaîne de caract plutôt qu&#39;en tableau</span></div>
<div class="line"><span class="lineno">  763</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  764</span>            <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>; </div>
<div class="line"><span class="lineno">  765</span>        }</div>
<div class="line"><span class="lineno">  766</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa890b5d5bf8065abf8cdfde313cf331d" name="aa890b5d5bf8065abf8cdfde313cf331d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa890b5d5bf8065abf8cdfde313cf331d">&#9670;&#160;</a></span>logEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::logEvent </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$statut_evenement_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00028">28</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   29</span>    {</div>
<div class="line"><span class="lineno">   30</span>        date_default_timezone_set(<span class="stringliteral">&#39;Europe/Paris&#39;</span>);</div>
<div class="line"><span class="lineno">   31</span>        <span class="comment">// Récupérer le titre, la description et le produit_id du ticket</span></div>
<div class="line"><span class="lineno">   32</span>        $query = <span class="stringliteral">&quot;SELECT titre, description, produit_id FROM ticket WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">   33</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">   34</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticket_id);</div>
<div class="line"><span class="lineno">   35</span>        $statement-&gt;execute();</div>
<div class="line"><span class="lineno">   36</span>        $ticket = $statement-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">if</span> (!$ticket) {</div>
<div class="line"><span class="lineno">   39</span>            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Ticket not found.&#39;</span>);</div>
<div class="line"><span class="lineno">   40</span>        }</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>        <span class="comment">// Préparer les données pour l&#39;insertion dans la table evenement</span></div>
<div class="line"><span class="lineno">   43</span>        $titre = $ticket[<span class="stringliteral">&#39;titre&#39;</span>];</div>
<div class="line"><span class="lineno">   44</span>        $description = $ticket[<span class="stringliteral">&#39;description&#39;</span>];</div>
<div class="line"><span class="lineno">   45</span>        $produit_id = $ticket[<span class="stringliteral">&#39;produit_id&#39;</span>];</div>
<div class="line"><span class="lineno">   46</span>        $date_evenement = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>); <span class="comment">// Utiliser la date et l&#39;heure actuelles</span></div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>        <span class="comment">// Insérer les données dans la table evenement</span></div>
<div class="line"><span class="lineno">   49</span>        $query = <span class="stringliteral">&quot;INSERT INTO evenement (ticket_id, username, date_evenement, statut_evenement_id, titre, description, produit_id) </span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">                VALUES (:ticket_id, :username, :date_evenement, :statut_evenement_id, :titre, :description, :produit_id)&quot;</span>;</div>
<div class="line"><span class="lineno">   51</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">   52</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticket_id);</div>
<div class="line"><span class="lineno">   53</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:username&#39;</span>, $username);</div>
<div class="line"><span class="lineno">   54</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:date_evenement&#39;</span>, $date_evenement);</div>
<div class="line"><span class="lineno">   55</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:statut_evenement_id&#39;</span>, $statut_evenement_id);</div>
<div class="line"><span class="lineno">   56</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:titre&#39;</span>, $titre);</div>
<div class="line"><span class="lineno">   57</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:description&#39;</span>, $description);</div>
<div class="line"><span class="lineno">   58</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:produit_id&#39;</span>, $produit_id);</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>        <span class="keywordflow">if</span> (!$statement-&gt;execute()) {</div>
<div class="line"><span class="lineno">   61</span>            error_log(<span class="stringliteral">&quot;Failed to log event: &quot;</span> . $query);</div>
<div class="line"><span class="lineno">   62</span>            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Failed to log event.&#39;</span>);</div>
<div class="line"><span class="lineno">   63</span>        }</div>
<div class="line"><span class="lineno">   64</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a58fd7d03ab34f8325b0178ea98caf014" name="a58fd7d03ab34f8325b0178ea98caf014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58fd7d03ab34f8325b0178ea98caf014">&#9670;&#160;</a></span>sendMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::sendMessage </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$message</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00689">689</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  689</span>                                                                 {</div>
<div class="line"><span class="lineno">  690</span>        date_default_timezone_set(<span class="stringliteral">&#39;Europe/Paris&#39;</span>);</div>
<div class="line"><span class="lineno">  691</span>        $date_sent = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>);</div>
<div class="line"><span class="lineno">  692</span>    </div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>        <span class="comment">// Récupérer le créateur du ticket</span></div>
<div class="line"><span class="lineno">  695</span>        $query = $this-&gt;db-&gt;prepare(<span class="stringliteral">&#39;</span></div>
<div class="line"><span class="lineno">  696</span><span class="stringliteral">            SELECT username </span></div>
<div class="line"><span class="lineno">  697</span><span class="stringliteral">            FROM ticket </span></div>
<div class="line"><span class="lineno">  698</span><span class="stringliteral">            WHERE ticket_id = :ticket_id</span></div>
<div class="line"><span class="lineno">  699</span><span class="stringliteral">        &#39;</span>);</div>
<div class="line"><span class="lineno">  700</span>        $query-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticket_id, PDO::PARAM_INT);</div>
<div class="line"><span class="lineno">  701</span>        $query-&gt;execute();</div>
<div class="line"><span class="lineno">  702</span>        $ticket = $query-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  703</span>        </div>
<div class="line"><span class="lineno">  704</span>        <span class="keywordflow">if</span> (!$ticket) {</div>
<div class="line"><span class="lineno">  705</span>            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Ticket not found&quot;</span>);</div>
<div class="line"><span class="lineno">  706</span>        }</div>
<div class="line"><span class="lineno">  707</span>    </div>
<div class="line"><span class="lineno">  708</span>        $receiver = <span class="stringliteral">&quot;frederic.zitta&quot;</span>;</div>
<div class="line"><span class="lineno">  709</span>    </div>
<div class="line"><span class="lineno">  710</span>        <span class="comment">// Insérer le message dans la table chat_message</span></div>
<div class="line"><span class="lineno">  711</span>        $insertQuery = $this-&gt;db-&gt;prepare(<span class="stringliteral">&#39;</span></div>
<div class="line"><span class="lineno">  712</span><span class="stringliteral">            INSERT INTO chat_messages (message_sender, message_receiver, message_sent, date_sent, ticket_id) </span></div>
<div class="line"><span class="lineno">  713</span><span class="stringliteral">            VALUES (:message_sender, :message_receiver, :message_sent, :date_sent, :ticket_id)</span></div>
<div class="line"><span class="lineno">  714</span><span class="stringliteral">        &#39;</span>);</div>
<div class="line"><span class="lineno">  715</span>        $insertQuery-&gt;bindValue(<span class="stringliteral">&#39;:message_sender&#39;</span>, $username, PDO::PARAM_STR);</div>
<div class="line"><span class="lineno">  716</span>        $insertQuery-&gt;bindValue(<span class="stringliteral">&#39;:message_receiver&#39;</span>, $receiver, PDO::PARAM_STR);</div>
<div class="line"><span class="lineno">  717</span>        $insertQuery-&gt;bindValue(<span class="stringliteral">&#39;:message_sent&#39;</span>, $message, PDO::PARAM_STR);</div>
<div class="line"><span class="lineno">  718</span>        $insertQuery-&gt;bindValue(<span class="stringliteral">&#39;:date_sent&#39;</span>, $date_sent, PDO::PARAM_STR);</div>
<div class="line"><span class="lineno">  719</span>        $insertQuery-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticket_id, PDO::PARAM_INT);</div>
<div class="line"><span class="lineno">  720</span>        $insertQuery-&gt;execute();</div>
<div class="line"><span class="lineno">  721</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a436b099317a53abdc6a61bd8bd6926a3" name="a436b099317a53abdc6a61bd8bd6926a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a436b099317a53abdc6a61bd8bd6926a3">&#9670;&#160;</a></span>setClose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::setClose </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00474">474</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  475</span>    {</div>
<div class="line"><span class="lineno">  476</span>        date_default_timezone_set(<span class="stringliteral">&#39;Europe/Paris&#39;</span>);</div>
<div class="line"><span class="lineno">  477</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  478</span>        $statut_id = 3;</div>
<div class="line"><span class="lineno">  479</span>        <span class="comment">// Récupérer l&#39;état actuel du ticket</span></div>
<div class="line"><span class="lineno">  480</span>        $query = <span class="stringliteral">&quot;SELECT * FROM ticket WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  481</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  482</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id]);</div>
<div class="line"><span class="lineno">  483</span>        $ticket = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>        <span class="keywordflow">if</span> ($ticket) {</div>
<div class="line"><span class="lineno">  486</span>            <span class="comment">// Sauvegarder l&#39;état actuel du ticket dans ticket_save</span></div>
<div class="line"><span class="lineno">  487</span>            $this-&gt;<a class="code hl_function" href="#a0cb32cfa860dcc6221a01410f97ec5e7">createTicketSave</a>(</div>
<div class="line"><span class="lineno">  488</span>                $ticket[<span class="stringliteral">&#39;ticket_id&#39;</span>],</div>
<div class="line"><span class="lineno">  489</span>                $ticket[<span class="stringliteral">&#39;titre&#39;</span>],</div>
<div class="line"><span class="lineno">  490</span>                $ticket[<span class="stringliteral">&#39;description&#39;</span>],</div>
<div class="line"><span class="lineno">  491</span>                $ticket[<span class="stringliteral">&#39;date_creation&#39;</span>],</div>
<div class="line"><span class="lineno">  492</span>                $statut_id,</div>
<div class="line"><span class="lineno">  493</span>                $ticket[<span class="stringliteral">&#39;urgence_id&#39;</span>],</div>
<div class="line"><span class="lineno">  494</span>                $username,</div>
<div class="line"><span class="lineno">  495</span>                $ticket[<span class="stringliteral">&#39;produit_id&#39;</span>],</div>
<div class="line"><span class="lineno">  496</span>                $ticket[<span class="stringliteral">&#39;type_id&#39;</span>]</div>
<div class="line"><span class="lineno">  497</span>            );</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>            <span class="comment">// Mettre à jour le statut du ticket</span></div>
<div class="line"><span class="lineno">  500</span>            $query = <span class="stringliteral">&quot;UPDATE ticket SET statut_id = 3, date_creation = :current_time WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  501</span>            $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  502</span>            $current_time = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>); <span class="comment">// Récupère la date et l&#39;heure actuelles</span></div>
<div class="line"><span class="lineno">  503</span>            $stmt-&gt;execute([</div>
<div class="line"><span class="lineno">  504</span>                <span class="stringliteral">&#39;:current_time&#39;</span> =&gt; $current_time,</div>
<div class="line"><span class="lineno">  505</span>                <span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id</div>
<div class="line"><span class="lineno">  506</span>            ]);</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>            <span class="keywordflow">return</span> $stmt-&gt;rowCount();</div>
<div class="line"><span class="lineno">  509</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  510</span>            error_log(<span class="stringliteral">&quot;Ticket with ID $ticket_id not found.&quot;</span>);</div>
<div class="line"><span class="lineno">  511</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  512</span>        }</div>
<div class="line"><span class="lineno">  513</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d6e92e827242620d3872e650a9d29e0" name="a7d6e92e827242620d3872e650a9d29e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d6e92e827242620d3872e650a9d29e0">&#9670;&#160;</a></span>setOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::setOpen </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00428">428</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  429</span>    {</div>
<div class="line"><span class="lineno">  430</span>        date_default_timezone_set(<span class="stringliteral">&#39;Europe/Paris&#39;</span>);</div>
<div class="line"><span class="lineno">  431</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  432</span>        $statut_id = 1;</div>
<div class="line"><span class="lineno">  433</span>        <span class="comment">// Récupérer l&#39;état actuel du ticket</span></div>
<div class="line"><span class="lineno">  434</span>        $query = <span class="stringliteral">&quot;SELECT * FROM ticket WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  435</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  436</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id]);</div>
<div class="line"><span class="lineno">  437</span>        $ticket = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">if</span> ($ticket) {</div>
<div class="line"><span class="lineno">  440</span>            <span class="comment">// Sauvegarder l&#39;état actuel du ticket dans ticket_save</span></div>
<div class="line"><span class="lineno">  441</span>            $this-&gt;<a class="code hl_function" href="#a0cb32cfa860dcc6221a01410f97ec5e7">createTicketSave</a>(</div>
<div class="line"><span class="lineno">  442</span>                $ticket[<span class="stringliteral">&#39;ticket_id&#39;</span>],</div>
<div class="line"><span class="lineno">  443</span>                $ticket[<span class="stringliteral">&#39;titre&#39;</span>],</div>
<div class="line"><span class="lineno">  444</span>                $ticket[<span class="stringliteral">&#39;description&#39;</span>],</div>
<div class="line"><span class="lineno">  445</span>                $ticket[<span class="stringliteral">&#39;date_creation&#39;</span>],</div>
<div class="line"><span class="lineno">  446</span>                $statut_id,</div>
<div class="line"><span class="lineno">  447</span>                $ticket[<span class="stringliteral">&#39;urgence_id&#39;</span>],</div>
<div class="line"><span class="lineno">  448</span>                $username,</div>
<div class="line"><span class="lineno">  449</span>                $ticket[<span class="stringliteral">&#39;produit_id&#39;</span>],</div>
<div class="line"><span class="lineno">  450</span>                $ticket[<span class="stringliteral">&#39;type_id&#39;</span>]</div>
<div class="line"><span class="lineno">  451</span>            );</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>            <span class="comment">// Mettre à jour le statut du ticket</span></div>
<div class="line"><span class="lineno">  454</span>            $query = <span class="stringliteral">&quot;UPDATE ticket SET statut_id = 1, date_creation = :current_time WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  455</span>            $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  456</span>            $current_time = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>); <span class="comment">// Récupère la date et l&#39;heure actuelles</span></div>
<div class="line"><span class="lineno">  457</span>            $stmt-&gt;execute([</div>
<div class="line"><span class="lineno">  458</span>                <span class="stringliteral">&#39;:current_time&#39;</span> =&gt; $current_time,</div>
<div class="line"><span class="lineno">  459</span>                <span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id</div>
<div class="line"><span class="lineno">  460</span>            ]);</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>            <span class="keywordflow">return</span> $stmt-&gt;rowCount();</div>
<div class="line"><span class="lineno">  463</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  464</span>            error_log(<span class="stringliteral">&quot;Ticket with ID $ticket_id not found.&quot;</span>);</div>
<div class="line"><span class="lineno">  465</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  466</span>        }</div>
<div class="line"><span class="lineno">  467</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a60a1aa6f035f2ac3ab62031f336cc1ad" name="a60a1aa6f035f2ac3ab62031f336cc1ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a1aa6f035f2ac3ab62031f336cc1ad">&#9670;&#160;</a></span>setSolve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::setSolve </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00520">520</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  521</span>    {</div>
<div class="line"><span class="lineno">  522</span>        date_default_timezone_set(<span class="stringliteral">&#39;Europe/Paris&#39;</span>);</div>
<div class="line"><span class="lineno">  523</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  524</span>        $statut_id = 2;</div>
<div class="line"><span class="lineno">  525</span>        <span class="comment">// Récupérer l&#39;état actuel du ticket</span></div>
<div class="line"><span class="lineno">  526</span>        $query = <span class="stringliteral">&quot;SELECT * FROM ticket WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  527</span>        $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  528</span>        $stmt-&gt;execute([<span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id]);</div>
<div class="line"><span class="lineno">  529</span>        $ticket = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordflow">if</span> ($ticket) {</div>
<div class="line"><span class="lineno">  532</span>            <span class="comment">// Sauvegarder l&#39;état actuel du ticket dans ticket_save</span></div>
<div class="line"><span class="lineno">  533</span>            $this-&gt;<a class="code hl_function" href="#a0cb32cfa860dcc6221a01410f97ec5e7">createTicketSave</a>(</div>
<div class="line"><span class="lineno">  534</span>                $ticket[<span class="stringliteral">&#39;ticket_id&#39;</span>],</div>
<div class="line"><span class="lineno">  535</span>                $ticket[<span class="stringliteral">&#39;titre&#39;</span>],</div>
<div class="line"><span class="lineno">  536</span>                $ticket[<span class="stringliteral">&#39;description&#39;</span>],</div>
<div class="line"><span class="lineno">  537</span>                $ticket[<span class="stringliteral">&#39;date_creation&#39;</span>],</div>
<div class="line"><span class="lineno">  538</span>                $statut_id,</div>
<div class="line"><span class="lineno">  539</span>                $ticket[<span class="stringliteral">&#39;urgence_id&#39;</span>],</div>
<div class="line"><span class="lineno">  540</span>                $username,</div>
<div class="line"><span class="lineno">  541</span>                $ticket[<span class="stringliteral">&#39;produit_id&#39;</span>],</div>
<div class="line"><span class="lineno">  542</span>                $ticket[<span class="stringliteral">&#39;type_id&#39;</span>]</div>
<div class="line"><span class="lineno">  543</span>            );</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>            <span class="comment">// Mettre à jour le statut du ticket</span></div>
<div class="line"><span class="lineno">  546</span>            $query = <span class="stringliteral">&quot;UPDATE ticket SET statut_id = 2, date_creation = :current_time WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  547</span>            $stmt = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  548</span>            $current_time = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>);</div>
<div class="line"><span class="lineno">  549</span>            $stmt-&gt;execute([</div>
<div class="line"><span class="lineno">  550</span>                <span class="stringliteral">&#39;:current_time&#39;</span> =&gt; $current_time,</div>
<div class="line"><span class="lineno">  551</span>                <span class="stringliteral">&#39;:ticket_id&#39;</span> =&gt; $ticket_id</div>
<div class="line"><span class="lineno">  552</span>            ]);</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>            <span class="keywordflow">return</span> $stmt-&gt;rowCount();</div>
<div class="line"><span class="lineno">  555</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  556</span>            error_log(<span class="stringliteral">&quot;Ticket with ID $ticket_id not found.&quot;</span>);</div>
<div class="line"><span class="lineno">  557</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  558</span>        }</div>
<div class="line"><span class="lineno">  559</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a335a06e4449c6904bddf13ed87297a" name="a2a335a06e4449c6904bddf13ed87297a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a335a06e4449c6904bddf13ed87297a">&#9670;&#160;</a></span>updateTicketsDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::updateTicketsDetails </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ticket_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$newTitle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$newDescription</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00615">615</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  616</span>    {</div>
<div class="line"><span class="lineno">  617</span>        date_default_timezone_set(<span class="stringliteral">&#39;Europe/Paris&#39;</span>);</div>
<div class="line"><span class="lineno">  618</span>        $date_creation = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>);</div>
<div class="line"><span class="lineno">  619</span>        $username = $_SESSION[<span class="stringliteral">&#39;username&#39;</span>];</div>
<div class="line"><span class="lineno">  620</span>        <span class="comment">// Récupérer l&#39;état actuel du ticket</span></div>
<div class="line"><span class="lineno">  621</span>        $query = <span class="stringliteral">&quot;SELECT * FROM ticket WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  622</span>        $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  623</span>        $statement-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticket_id);</div>
<div class="line"><span class="lineno">  624</span>        $statement-&gt;execute();</div>
<div class="line"><span class="lineno">  625</span>        $ticket = $statement-&gt;fetch(PDO::FETCH_ASSOC);</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>        <span class="keywordflow">if</span> ($ticket) {</div>
<div class="line"><span class="lineno">  628</span>            <span class="comment">// Sauvegarder l&#39;état actuel du ticket dans ticket_save</span></div>
<div class="line"><span class="lineno">  629</span>            </div>
<div class="line"><span class="lineno">  630</span> </div>
<div class="line"><span class="lineno">  631</span>            <span class="comment">// Mettre à jour le ticket avec les nouvelles valeurs</span></div>
<div class="line"><span class="lineno">  632</span>            $query = <span class="stringliteral">&quot;UPDATE ticket SET titre = :newTitle, description = :newDescription, date_creation = :date_creation WHERE ticket_id = :ticket_id&quot;</span>;</div>
<div class="line"><span class="lineno">  633</span>            $statement = $this-&gt;db-&gt;prepare($query);</div>
<div class="line"><span class="lineno">  634</span>            $statement-&gt;bindValue(<span class="stringliteral">&#39;:ticket_id&#39;</span>, $ticket_id);</div>
<div class="line"><span class="lineno">  635</span>            $statement-&gt;bindValue(<span class="stringliteral">&#39;:newTitle&#39;</span>, $newTitle);</div>
<div class="line"><span class="lineno">  636</span>            $statement-&gt;bindValue(<span class="stringliteral">&#39;:newDescription&#39;</span>, $newDescription);</div>
<div class="line"><span class="lineno">  637</span>            $statement-&gt;bindValue(<span class="stringliteral">&#39;:date_creation&#39;</span>, $date_creation);</div>
<div class="line"><span class="lineno">  638</span>        </div>
<div class="line"><span class="lineno">  639</span>            $this-&gt;<a class="code hl_function" href="#a0cb32cfa860dcc6221a01410f97ec5e7">createTicketSave</a>(</div>
<div class="line"><span class="lineno">  640</span>                $ticket[<span class="stringliteral">&#39;ticket_id&#39;</span>],</div>
<div class="line"><span class="lineno">  641</span>                $newTitle,</div>
<div class="line"><span class="lineno">  642</span>                $newDescription,</div>
<div class="line"><span class="lineno">  643</span>                $date_creation,</div>
<div class="line"><span class="lineno">  644</span>                $ticket[<span class="stringliteral">&#39;statut_id&#39;</span>],</div>
<div class="line"><span class="lineno">  645</span>                $ticket[<span class="stringliteral">&#39;urgence_id&#39;</span>],</div>
<div class="line"><span class="lineno">  646</span>                $username,</div>
<div class="line"><span class="lineno">  647</span>                $ticket[<span class="stringliteral">&#39;produit_id&#39;</span>],</div>
<div class="line"><span class="lineno">  648</span>                $ticket[<span class="stringliteral">&#39;type_id&#39;</span>]</div>
<div class="line"><span class="lineno">  649</span>            );</div>
<div class="line"><span class="lineno">  650</span>            <span class="keywordflow">if</span> ($statement-&gt;execute()) {</div>
<div class="line"><span class="lineno">  651</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  652</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  653</span>                error_log(<span class="stringliteral">&quot;Failed to execute SQL query: &quot;</span> . $query);</div>
<div class="line"><span class="lineno">  654</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  655</span>            }</div>
<div class="line"><span class="lineno">  656</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  657</span>            error_log(<span class="stringliteral">&quot;Ticket with ID $ticket_id not found.&quot;</span>);</div>
<div class="line"><span class="lineno">  658</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  659</span>        }</div>
<div class="line"><span class="lineno">  660</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentation des données membres</h2>
<a id="a59ef6b9cfddef4424f3aab8615b173ea" name="a59ef6b9cfddef4424f3aab8615b173ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59ef6b9cfddef4424f3aab8615b173ea">&#9670;&#160;</a></span>$db</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TicketModel::$db</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Instance de PDO pour la connexion à la base de données. </p>

<p class="definition">Définition à la ligne <a class="el" href="_ticket_model_8php_source.html#l00009">9</a> du fichier <a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a>.</p>

</div>
</div>
<hr/>La documentation de cette classe a été générée à partir du fichier suivant :<ul>
<li>app/src/Models/<a class="el" href="_ticket_model_8php_source.html">TicketModel.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré par&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
